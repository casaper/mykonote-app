{"version":3,"sources":["AlertFlash.js","global-jquery.js","Flash.js","EventHive.js","keyboard.js","ViewportMode.js","Uuid.js","Note.js","Spinner.js","NoteList.js","highlight.js","NoteForm.js","PushState.js","Navbar.js","SaveStateLabel.js","AddNoteButton.js","SyncStorage.js","AutoSave.js","NoteEdit.js","App.js","registerServiceWorker.js","setGlobals.js","setApiHost.js","index.js","registerGlobalSpinner.js","NoticeFlash.js","AbstractFlash.js","images/logo.svg"],"names":["AlertFlash","AbstractFlash","window","jQuery","$","Flash","react_default","a","createElement","NoticeFlash","Component","EventHive","topic","listener","_this","this","topics","hasOwnProperty","call","index","push","remove","info","forEach","item","undefined","_topics","Mousetrap","prototype","stopCallback","bind","publish","ViewportMode","envs","doc","document","temp","body","appendChild","i","length","env","className","offsetParent","removeChild","mode","getMode","Uuid","replace","c","r","Math","random","toString","Note","uid","title","content","createdAt","updatedAt","archivedAt","Object","classCallCheck","_uid","generateV4","_title","_content","_createdAt","Date","_updatedAt","_serverUpdatedAt","_archivedAt","JSON","stringify","created_at","toISOString","updated_at","server_updated_at","serverUpdatedAt","archived_at","attributes","Spinner","viewBox","xmlns","fill","strokeWidth","strokeLinecap","cx","cy","NoteList","props","context","possibleConstructorReturn","getPrototypeOf","state","notes","currentPage","hasMorePages","isSynced","searchQuery","_this2","getListCssClass","ref","$list","renderList","renderNextPageLink","renderListSpinner","_this3","map","note","renderListItem","key","getListItemCssClass","onClick","handleNoteClick","getNoteAvatar","renderListItemButton","handleArchiveNoteClick","handleDeleteNoteClick","humanDate","relativeTime","icon","handleNextPageClick","src_Spinner","cssClass","activeNoteUid","isInitialEdit","_this4","toggleListMore","isMobileMode","collapse","toggle","on","subscribe","listNeedsUpdate","updateList","nextProps","setState","e","removeClass","currentTarget","addClass","_this5","preventDefault","blur","updateListRequest","abort","ajax","url","dataType","data","search","page","executeUpdateListRequest","_this6","done","fromAttributes","current_page","has_more_pages","fail","xhr","status","error","show","console","match","previewImageUrl","getPreviewImageUrl","style","backgroundImage","concat","backgroundRepeat","backgroundSize","alt","linkIsVisible","highlight","registerLanguage","asciidoc","bash","basic","clean","clojure","cmake","coffeescript","cpp","crystal","cs","css","d","dart","diff","dockerfile","ebnf","elixir","elm","erb","erlang","fsharp","gherkin","go","gradle","groovy","haml","handlebars","htmlbars","http","ini","java","javascript","json","kotlin","less","lisp","llvm","makefile","markdown","mathematica","matlab","nginx","objectivec","perl","pgsql","php","plaintext","powershell","prolog","properties","python","ruby","rust","scala","scss","shell","sql","stylus","swift","tex","typescript","vim","xml","yaml","hljs","NoteForm","shouldRerender","formContainerElement","onSubmit","handleFormSubmit","renderTitle","renderContent","type","value","onChange","handleTitleChange","placeholder","titleElement","contentContainerElement","handleChange","contentElement","innerHTML","focusTitleFieldIfNewNote","renderEditor","editor","pasteHTML","classList","add","off","setText","history","clear","update","handleContentChange","nextState","Quill","theme","modules","syntax","toolbar","header","color","background","list","indent","task-list","querySelector","isNew","focus","PushState","location","pathname","Navbar","showSpinner","renderLogo","renderMobileHamburgerMenu","renderMobileSearchButton","renderSearchBox","src","logo","subscribeSpinner","subscribeSearch","subscribeMobileSearch","$searchBox","handleSearchEnter","$searchInput","handleSearchCleared","handleHamburgerButtonClick","handleSearchButtonClick","$searchButton","hasClass","$hamburger","target","val","select","SaveStateLabel","AddNoteButton","handleNewNoteClick","SyncStorage","localStorage","setItem","_getKey","toJson","getItem","callback","keys","_getLocalStorageKeys","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","noteRaw","parse","err","return","removeItem","startsWith","KEY_PREFIX","AutoSave","onServerSync","onServerSyncCallback","setSyncStatus","setInterval","syncToServer","POLLING_INTERVAL","set","active","eachNote","method","serverNote","ajaxDone","ajaxFail","isEmpty","onbeforeunload","syncStorageRawNote","get","readyState","responseJSON","errors","join","NoteEdit","pushState","initStateFromNote","params","id","initStateFromNoteId","getNewNoteAttributes","handleSearchEnterDebounced","debounce","renderHeaderBar","autoSave","handleServerSync","startPolling","setNewNote","src_Navbar","src_SaveStateLabel","src_NoteList_0","src_NoteForm_0","handleEditChange","src_AddNoteButton","setBrowserTitle","objectSpread","setEdit","stopPropagation","__webpack_require__","then","t","bootbox","confirm","result","deleteNote","setArchived","setChange","persist","afterSetState","setNew","message","always","LoginForm","React","lazy","RegistrationForm","App","isLoggedIn","setIsLoggedIn","HashRouter","src_Flash","renderLoggedIn","renderLoggedOut","material","init","onLoginSuccess","Switch","Route","path","component","Redirect","from","to","render","react","fallback","assign","alwaysRememberMe","ALWAYS_REMEMBER_ME","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","catch","API_HOST","ajaxPrefilter","options","ReactDOM","src_App_0","getElementById","URL","process","origin","addEventListener","fetch","response","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","timeoutId","ajaxStart","clearTimeout","setTimeout","ajaxStop","registerGlobalSpinner","_home_lex_src_mykonote_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_lex_src_mykonote_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_lex_src_mykonote_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","react__WEBPACK_IMPORTED_MODULE_5___default","getCssClass","handleClose","dangerouslySetInnerHTML","__html","getAdditionalCssClass","constructor","getEventName","getName","trigger","module","exports","p"],"mappings":"sJAEMA,oLAEF,MAAO,wDAIP,MAAO,6BANcC,GAUVD,mQCVfE,OAAOC,OAASC,IAChBF,OAAOE,EAAIA,wDCYIC,mLATX,OACEC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,MACAH,EAAAC,EAAAC,cAACR,EAAA,EAAD,cALYU,uDCmCLC,yGA9BIC,EAAOC,GAAU,IAAAC,EAAAC,KAE3BA,KAAKC,OAAOC,eAAeC,KAAKH,KAAKC,OAAQJ,KAChDG,KAAKC,OAAOJ,GAAS,IAIvB,IAAIO,EAAQJ,KAAKC,OAAOJ,GAAOQ,KAAKP,GAAW,EAG/C,MAAO,CACLQ,OAAQ,kBACCP,EAAKE,OAAOJ,GAAOO,qCAKjBP,EAAOU,GAEfP,KAAKC,OAAOC,eAAeC,KAAKH,KAAKC,OAAQJ,IAKlDG,KAAKC,OAAOJ,GAAOW,QAAQ,SAASC,GAClCA,OAAcC,IAATH,EAAqBA,EAAO,qCA5BnC,MAH4B,qBAAjBP,KAAKW,UACdX,KAAKW,QAAU,IAEVX,KAAKW,iBCFhBC,IAAUC,UAAUC,aAAe,WAAa,OAAO,GAEvDF,IAAUG,KAAK,cAAe,WAG5B,OAFAnB,EAAUoB,QAAQ,iBAEX,IAGTJ,IAAUG,KAAK,cAAe,WAG5B,OAFAnB,EAAUoB,QAAQ,aAEX,yBCaMC,yGAzBX,IAAMC,EAAO,CAAC,KAAM,KAAM,KAAM,MAC1BC,EAAMhC,OAAOiC,SACbC,EAAOF,EAAI1B,cAAc,OAE/B0B,EAAIG,KAAKC,YAAYF,GAErB,IAAK,IAAIG,EAAIN,EAAKO,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACzC,IAAME,EAAMR,EAAKM,GAIjB,GAFAH,EAAKM,UAAY,UAAYD,EAEH,OAAtBL,EAAKO,aAEP,OADAT,EAAIG,KAAKO,YAAYR,GACdK,EAGX,MAAO,0CAIP,IAAMI,EAAO9B,KAAK+B,UAClB,MAAgB,OAATD,GAA0B,OAATA,WCfbE,4GAPX,MAAO,uCAAuCC,QAAQ,QAAS,SAASC,GACtE,IAAIC,EAAoB,GAAhBC,KAAKC,SAAgB,EAC7B,OAD0C,MAANH,EAAYC,EAAU,EAAJA,EAAW,GACxDG,SAAS,eCiETC,aAlEb,SAAAA,EAAYC,EAAKC,EAAOC,EAASC,EAAWC,EAAWC,GAAaC,OAAAC,EAAA,EAAAD,CAAA9C,KAAAuC,GAClEvC,KAAKgD,KAAOR,GAAOR,EAAKiB,aACxBjD,KAAKkD,OAAST,GAAS,GACvBzC,KAAKmD,SAAWT,GAAW,GAC3B1C,KAAKoD,WAAaT,GAAa,IAAIU,KACnCrD,KAAKsD,WAAaV,GAAa5C,KAAKoD,WACpCpD,KAAKuD,iBAAmBvD,KAAKsD,WAC7BtD,KAAKwD,YAAcX,4DA0BnB7C,KAAKwD,YAAc,IAAIH,qCAIvB,OAAQrD,KAAKyC,QAAUzC,KAAK0C,yCAI5B,OAAOe,KAAKC,UACV,CACElB,IAAKxC,KAAKwC,IACVC,MAAOzC,KAAKyC,MACZC,QAAS1C,KAAK0C,QACdiB,WAAY3D,KAAK2C,UAAUiB,cAC3BC,WAAY7D,KAAK4C,UAAUgB,cAC3BE,kBAAmB9D,KAAK+D,gBAAgBH,cACxCI,YAAahE,KAAK6C,WAAa7C,KAAK6C,WAAWe,cAAgB,mCAvCzD,OAAO5D,KAAKgD,mCAEV,OAAOhD,KAAKkD,qBAChBT,GACRzC,KAAKsD,WAAa,IAAID,KACtBrD,KAAKkD,OAAST,kCAGA,OAAOzC,KAAKmD,uBAChBT,GACV1C,KAAKsD,WAAa,IAAID,KACtBrD,KAAKmD,SAAWT,oCAGA,OAAO1C,KAAKoD,6CACZ,OAAOpD,KAAKsD,mDAEN,OAAOtD,KAAKuD,+BAChBQ,GAAmB/D,KAAKuD,iBAAmBQ,qCAE5C,OAAO/D,KAAKwD,qDAwBTS,GACpB,OAAO,IAAI1B,EACT0B,EAAWzB,IACXyB,EAAWxB,MACXwB,EAAWvB,QACX,IAAIW,KAAKY,EAAWN,YACpB,IAAIN,KAAKY,EAAWJ,YACpBI,EAAWD,YAAc,IAAIX,KAAKY,EAAWD,aAAe,eC5CnDE,MAlBf,WACE,OACE3E,EAAAC,EAAAC,cAAA,OACEkC,UAAU,UACVwC,QAAQ,YACRC,MAAM,8BACN7E,EAAAC,EAAAC,cAAA,UACEkC,UAAU,OACV0C,KAAK,OACLC,YAAY,IACZC,cAAc,QACdC,GAAG,KACHC,GAAG,KACHtC,EAAE,SC6PKuC,sBAhQb,SAAAA,EAAYC,EAAOC,GAAS,IAAA7E,EAAA,OAAA+C,OAAAC,EAAA,EAAAD,CAAA9C,KAAA0E,IAC1B3E,EAAA+C,OAAA+B,EAAA,EAAA/B,CAAA9C,KAAA8C,OAAAgC,EAAA,EAAAhC,CAAA4B,GAAAvE,KAAAH,KAAM2E,EAAOC,KAERG,MAAQ,CACXC,MAAO,GACPC,YAAa,EACbC,cAAc,EACdC,UAAU,EACVC,iBAAa1E,GARWX,wEAYnB,IAAAsF,EAAArF,KACP,OACET,EAAAC,EAAAC,cAAA,OAAKkC,UAAW3B,KAAKsF,kBAAmBC,IAAK,SAACrD,GAAD,OAAOmD,EAAKG,MAAQnG,IAAE6C,KAChElC,KAAKyF,aACLzF,KAAK0F,qBACL1F,KAAK2F,0DAKC,IAAAC,EAAA5F,KACX,OAAOA,KAAK+E,MAAMC,MAAMa,IAAI,SAACC,GAAD,OAAUF,EAAKG,eAAeD,4CAG7CA,GACb,OACEvG,EAAAC,EAAAC,cAAA,OAAKuG,IAAKF,EAAKtD,KACbjD,EAAAC,EAAAC,cAAA,OACEkC,UAAW3B,KAAKiG,oBAAoBH,GACpCI,QAASlG,KAAKmG,gBAAgBpF,KAAKf,KAAM8F,IAEzCvG,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,eACZ3B,KAAKoG,cAAcN,IAEtBvG,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,eACZ3B,KAAKqG,qBAAqB,2CAA4CrG,KAAK2E,MAAM2B,uBAAuBvF,KAAKf,KAAM8F,GAAO,WAC1H9F,KAAKqG,qBAAqB,mBAAoBrG,KAAK2E,MAAM4B,sBAAsBxF,KAAKf,KAAM8F,GAAO,UAClGvG,EAAAC,EAAAC,cAAA,MAAIkC,UAAU,2BACXmE,EAAKrD,OAERlD,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,wBACZ6E,IAAUC,aAAaX,EAAKlD,cAInCrD,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,uEAKAA,EAAWuE,EAASQ,GACvC,OACEnH,EAAAC,EAAAC,cAAA,OACEkC,UAAWA,EACXuE,QAASA,GACT3G,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,kBAAkB+E,iDAMnC,GAAK1G,KAAK+E,MAAMG,aAEhB,OACE3F,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,iCACbpC,EAAAC,EAAAC,cAAA,UAAQyG,QAASlG,KAAK2G,oBAAoB5F,KAAKf,MAAO2B,UAAU,gCAC9DpC,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,iCAAb,6DAON,OACEpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,sCACbpC,EAAAC,EAAAC,cAACmH,EAAD,mDAKcd,GAClB,IAAIe,EAAW,uCAKf,OAJIf,EAAKtD,MAAQxC,KAAK2E,MAAMmC,gBAC1BD,GAAY,WAGPA,4CAKP,IAAIA,EAAW,uCAMf,OAJK7G,KAAK2E,MAAMoC,gBACdF,GAAY,OAGPA,8CAGW,IAAAG,EAAAhH,KAClBA,KAAKiH,gBAAe,GAGhBhG,EAAaiG,iBACflH,KAAKwF,MAAM2B,SAAS,CAAEC,QAAQ,IAE9BpH,KAAKwF,MAAM6B,GAAG,qBAAsB,WAClCzH,EAAUoB,QAAQ,wBAGpBpB,EAAU0H,UAAU,iBAAkB,WACpCN,EAAKxB,MAAM2B,SAAS,UAEtBvH,EAAU0H,UAAU,iBAAkB,WACpCN,EAAKxB,MAAM2B,SAAS,UAGtBvH,EAAU0H,UAAU,iBAAkB,WACpCN,EAAKxB,MAAM2B,SAAS,UAGtBvH,EAAU0H,UAAU,YAAa,WAC/BN,EAAKxB,MAAM2B,SAAS,wDAMpBnH,KAAKuH,kBACPvH,KAAKuH,iBAAkB,EACvBvH,KAAKwH,gEAIiBC,IACnBzH,KAAK+E,MAAMI,UAAYsC,EAAUtC,WACpCnF,KAAKuH,iBAAkB,GAGrBvH,KAAK+E,MAAMK,cAAgBqC,EAAUrC,cACvCpF,KAAKuH,iBAAkB,GAGzBvH,KAAK0H,SAAU,CACbvC,SAAUsC,EAAUtC,SACpBC,YAAaqC,EAAUrC,sDAIXU,EAAM6B,GACpBtI,IAAE,yBAAyBuI,YAAY,UACvCvI,IAAEsI,EAAEE,eAAeC,SAAS,UAExB7G,EAAaiG,gBACftH,EAAUoB,QAAQ,kBAGpBpB,EAAUoB,QAAQ,aAClBhB,KAAK2E,MAAMwB,gBAAgBL,EAAM6B,+CAGfA,GAAG,IAAAI,EAAA/H,KACrB2H,EAAEK,iBACF3I,IAAEsI,EAAEE,eAAeI,OAEnBjI,KAAKiH,gBAAe,GAEpBjH,KAAK0H,SAAS,CAAEzC,YAAajF,KAAK+E,MAAME,YAAc,GAAK,WACzD8C,EAAKP,oDAKHxH,KAAKkI,mBACPlI,KAAKkI,kBAAkBC,QAGzBnI,KAAKkI,kBAAoB7I,IAAE+I,KAAK,CAC9BC,IAAK,aACLC,SAAU,OACVC,KAAM,CAAEC,OAAQxI,KAAK+E,MAAMK,YAAaqD,KAAMzI,KAAK+E,MAAME,eAG3DjF,KAAK0I,8EAGoB,IAAAC,EAAA3I,KACzBA,KAAKkI,kBACFU,KAAK,SAACL,GACLI,EAAK1B,gBAAe,GAEpB,IAAMjC,EAAQuD,EAAKvD,MAAMa,IAAI,SAASC,GACpC,OAAOvD,EAAKsG,eAAe/C,KAG7B6C,EAAKjB,SAAS,CACZ1C,MAAOA,EACPC,YAAasD,EAAKO,aAClB5D,aAAcqD,EAAKQ,mBAGtBC,KAAK,SAACC,EAAKC,EAAQC,GAGJ,UAAVA,IAIJR,EAAK1B,gBAAe,GAEpBhI,IAAWmK,KAAK,0CAChBC,QAAQF,MAAM,QAASR,EAAKhE,MAAM0D,IAAK,WAAYa,EAAQ,UAAWC,EAAM7G,0DAI/DwD,GACjB,IAAIwD,EAAQxD,EAAKpD,QAAQ4G,MAAM,oCAC/B,OAAIA,EACKA,EAAM,GAGN,2CAIGxD,GACZ,IAAIyD,EAAkBvJ,KAAKwJ,mBAAmB1D,GAC9C,GAAIyD,EAAiB,CACnB,IAAME,EAAQ,CACZC,gBAAe,OAAAC,OAASJ,EAAT,KACfK,iBAAkB,YAClBC,eAAgB,SAGlB,OAAOtK,EAAAC,EAAAC,cAAA,KAAGgK,MAAOA,EAAO9H,UAAU,SAASmI,IAAI,mBAG/C,OAAOvK,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,kBAAb,kDAIIoI,GACTA,GACF1K,IAAE,wBAAwBuI,YAAY,UACtCvI,IAAE,sBAAsByI,SAAS,YAGjCzI,IAAE,wBAAwByI,SAAS,UACnCzI,IAAE,sBAAsBuI,YAAY,kBA5PnBjI,8xCC2DvBqK,IAAUC,iBAAiB,WAAYC,KACvCF,IAAUC,iBAAiB,OAAQE,KACnCH,IAAUC,iBAAiB,QAASG,KACpCJ,IAAUC,iBAAiB,QAASI,KACpCL,IAAUC,iBAAiB,UAAWK,KACtCN,IAAUC,iBAAiB,QAASM,KACpCP,IAAUC,iBAAiB,eAAgBO,KAC3CR,IAAUC,iBAAiB,MAAOQ,KAClCT,IAAUC,iBAAiB,UAAWS,KACtCV,IAAUC,iBAAiB,KAAMU,MACjCX,IAAUC,iBAAiB,MAAOW,MAClCZ,IAAUC,iBAAiB,IAAKY,MAChCb,IAAUC,iBAAiB,OAAQa,MACnCd,IAAUC,iBAAiB,OAAQc,MACnCf,IAAUC,iBAAiB,aAAce,MACzChB,IAAUC,iBAAiB,OAAQgB,MACnCjB,IAAUC,iBAAiB,SAAUiB,MACrClB,IAAUC,iBAAiB,MAAOkB,MAClCnB,IAAUC,iBAAiB,MAAOmB,MAClCpB,IAAUC,iBAAiB,SAAUoB,MACrCrB,IAAUC,iBAAiB,SAAUqB,MACrCtB,IAAUC,iBAAiB,UAAWsB,MACtCvB,IAAUC,iBAAiB,KAAMuB,MACjCxB,IAAUC,iBAAiB,SAAUwB,MACrCzB,IAAUC,iBAAiB,SAAUyB,MACrC1B,IAAUC,iBAAiB,OAAQ0B,MACnC3B,IAAUC,iBAAiB,aAAc2B,MACzC5B,IAAUC,iBAAiB,WAAY4B,MACvC7B,IAAUC,iBAAiB,OAAQ6B,MACnC9B,IAAUC,iBAAiB,MAAO8B,MAClC/B,IAAUC,iBAAiB,OAAQ+B,MACnChC,IAAUC,iBAAiB,aAAcgC,MACzCjC,IAAUC,iBAAiB,OAAQiC,MACnClC,IAAUC,iBAAiB,SAAUkC,MACrCnC,IAAUC,iBAAiB,OAAQmC,MACnCpC,IAAUC,iBAAiB,OAAQoC,MACnCrC,IAAUC,iBAAiB,OAAQqC,MACnCtC,IAAUC,iBAAiB,WAAYsC,MACvCvC,IAAUC,iBAAiB,WAAYuC,MACvCxC,IAAUC,iBAAiB,cAAewC,MAC1CzC,IAAUC,iBAAiB,SAAUyC,MACrC1C,IAAUC,iBAAiB,QAAS0C,MACpC3C,IAAUC,iBAAiB,aAAc2C,MACzC5C,IAAUC,iBAAiB,OAAQ4C,MACnC7C,IAAUC,iBAAiB,QAAS6C,MACpC9C,IAAUC,iBAAiB,MAAO8C,MAClC/C,IAAUC,iBAAiB,YAAa+C,MACxChD,IAAUC,iBAAiB,aAAcgD,MACzCjD,IAAUC,iBAAiB,SAAUiD,MACrClD,IAAUC,iBAAiB,aAAckD,MACzCnD,IAAUC,iBAAiB,SAAUmD,MACrCpD,IAAUC,iBAAiB,IAAK9H,MAChC6H,IAAUC,iBAAiB,OAAQoD,MACnCrD,IAAUC,iBAAiB,OAAQqD,MACnCtD,IAAUC,iBAAiB,QAASsD,MACpCvD,IAAUC,iBAAiB,OAAQuD,MACnCxD,IAAUC,iBAAiB,QAASwD,MACpCzD,IAAUC,iBAAiB,MAAOyD,MAClC1D,IAAUC,iBAAiB,SAAU0D,MACrC3D,IAAUC,iBAAiB,QAAS2D,MACpC5D,IAAUC,iBAAiB,MAAO4D,MAClC7D,IAAUC,iBAAiB,aAAc6D,MACzC9D,IAAUC,iBAAiB,MAAO8D,MAClC/D,IAAUC,iBAAiB,MAAO+D,MAClChE,IAAUC,iBAAiB,OAAQgE,MAEnC9O,OAAO+O,KAAOlE,4BCsCCmE,qCApKb,SAAAA,EAAYxJ,EAAOC,GAAS,IAAA7E,EAAA,OAAA+C,OAAAC,EAAA,EAAAD,CAAA9C,KAAAmO,IAC1BpO,EAAA+C,OAAA+B,EAAA,EAAA/B,CAAA9C,KAAA8C,OAAAgC,EAAA,EAAAhC,CAAAqL,GAAAhO,KAAAH,KAAM2E,EAAOC,KAERG,MAAQ,CACXe,KAAM/F,EAAK4E,MAAMmB,MAGnB/F,EAAKqO,gBAAiB,EAPIrO,wEAUnB,IAAAsF,EAAArF,KACP,OACET,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QACEkC,UAAU,kBACV4D,IAAK,SAACrD,GAAD,OAAOmD,EAAKgJ,qBAAuBnM,GACxCoM,SAAUtO,KAAKuO,kBACfhP,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,eACZ3B,KAAKwO,cACLxO,KAAKyO,yDAOF,IAAA7I,EAAA5F,KACZ,OACET,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,kDACbpC,EAAAC,EAAAC,cAAA,SACEiP,KAAK,OACL/M,UAAU,+BACVgN,MAAO3O,KAAK+E,MAAMe,KAAKrD,MACvBmM,SAAU5O,KAAK6O,kBAAkB9N,KAAKf,MACtC8O,YAAY,QACZvJ,IAAK,SAACrD,GAAD,OAAO0D,EAAKmJ,aAAe7M,8CAMxB,IAAA8E,EAAAhH,KACd,OACET,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,gDACbpC,EAAAC,EAAAC,cAAA,OACE8F,IAAK,SAACrD,GAAD,OAAO8E,EAAKgI,wBAA0B9M,+CAQlCyF,GAEf,OADAA,EAAEK,kBACK,8CAIPhI,KAAKoO,gBAAiB,EACtB,IAAMtI,EAAO9F,KAAK+E,MAAMe,KACxBA,EAAKrD,MAAQzC,KAAK+O,aAAaJ,MAC/B3O,KAAK0H,SAAS,CAAE5B,KAAMA,GAAQ9F,KAAKiP,4DAInCjP,KAAKoO,gBAAiB,EACtB,IAAMtI,EAAO9F,KAAK+E,MAAMe,KACxBA,EAAKpD,QAAU1C,KAAKkP,eAAeC,UACnCnP,KAAK0H,SAAS,CAAE5B,KAAMA,GAAQ9F,KAAKiP,qDAInCjP,KAAK2E,MAAMsK,aAAajP,KAAK+E,MAAMe,kDAGjB,IAAAiC,EAAA/H,KAClBA,KAAKoP,2BACLpP,KAAKqP,eAKLzP,EAAU0H,UAAU,cAAe,SAACiB,GAClCR,EAAKgH,aAAaJ,MAAQpG,EAAK9F,MAC/BsF,EAAK8G,oBACL9G,EAAKuH,OAAOC,UAAUhH,EAAK7F,WAGzBzB,EAAaiG,iBACftH,EAAU0H,UAAU,iBAAkB,WACpCS,EAAKsG,qBAAqBmB,UAAUC,IAAI,YAE1C7P,EAAU0H,UAAU,iBAAkB,WACpCS,EAAKsG,qBAAqBmB,UAAUlP,OAAO,YAG7CV,EAAU0H,UAAU,iBAAkB,WACpCS,EAAKsG,qBAAqBmB,UAAUC,IAAI,0DAO5CzP,KAAKsP,OAAOI,IAAI,eAIhB1P,KAAKsP,OAAOK,QAAQ,IACpB3P,KAAKkP,eAAeC,UAAYnP,KAAK+E,MAAMe,KAAKpD,QAChD1C,KAAKsP,OAAOM,QAAQC,QAEpB7P,KAAKsP,OAAOQ,SACZ9P,KAAKsP,OAAOjI,GAAG,cAAerH,KAAK+P,oBAAoBhP,KAAKf,yDAGpCyH,GAAW,IAAAkB,EAAA3I,KAE/ByH,EAAU3B,KAAKtD,MAAQxC,KAAK+E,MAAMe,KAAKtD,MACzCxC,KAAKoO,gBAAiB,EACtBpO,KAAK0H,SAAS,CACZ5B,KAAM2B,EAAU3B,MACf,kBAAM6C,EAAKyG,4EAII3H,EAAWuI,GAG/B,OAAOhQ,KAAKoO,sDAIZpO,KAAKsP,OAAS,IAAIW,KAAMjQ,KAAKgP,wBAAyB,CACpDkB,MAAO,OACPC,QAAS,CACPC,QAAU,EACVC,QAAW,CACT,CAAC,CAAEC,OAAU,CAAC,EAAG,GAAG,KACpB,CAAC,OAAQ,SAAU,UACnB,CAAC,CAAEC,MAAS,IAAM,CAAEC,WAAc,KAClC,CAAC,aAAc,cACf,CACE,CAAEC,KAAQ,WAAa,CAAEA,KAAQ,UAAY,YAC7C,CAAEC,OAAU,MAAQ,CAAEA,OAAU,OAElC,CAAC,OAAQ,SACT,CAAC,UAEHC,aAAa,KAIjB3Q,KAAKkP,eAAiBlP,KAAKgP,wBAAwB4B,cAAc,iEAI7D5Q,KAAK+E,MAAMe,KAAK+K,SAClB7Q,KAAK+O,aAAa+B,eAhKDnR,cCkBRoR,cA1Bb,SAAAA,EAAYnB,GAAU9M,OAAAC,EAAA,EAAAD,CAAA9C,KAAA+Q,GACpB/Q,KAAK4P,QAAUA,uDAIf5P,KAAK4P,QAAQvP,KAAK,0CAGZyF,GACN,IAAMuC,EAAG,UAAAsB,OAAa7D,EAAKtD,KAEvBxC,KAAK4P,QAAQoB,SAASC,WAAa5I,GACrCrI,KAAK4P,QAAQvP,KAAKgI,2CAINvC,GACVA,GAAQA,EAAKrD,MACfrB,SAASqB,MAAT,GAAAkH,OAAoB7D,EAAKrD,MAAzB,eAGArB,SAASqB,MAAQ,wCCoLRyO,eAlMb,SAAAA,EAAYvM,EAAOC,GAAS,IAAA7E,EAAA,OAAA+C,OAAAC,EAAA,EAAAD,CAAA9C,KAAAkR,IAC1BnR,EAAA+C,OAAA+B,EAAA,EAAA/B,CAAA9C,KAAA8C,OAAAgC,EAAA,EAAAhC,CAAAoO,GAAA/Q,KAAAH,KAAM2E,EAAOC,KAERG,MAAQ,CAAEoM,aAAa,GAHFpR,wEAO1B,OACER,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,OACbpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,YACbpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,iBACZ3B,KAAKoR,aACLpR,KAAKqR,4BACLrR,KAAKsR,4BAEPtR,KAAKuR,yDAOZ,OACEhS,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,gBACbpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,kBACZ3B,KAAK+E,MAAMoM,YACV5R,EAAAC,EAAAC,cAACmH,EAAD,MAEArH,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,eACbpC,EAAAC,EAAAC,cAAA,OAAK+R,IAAKC,KAAM3H,IAAI,wDAS9B9J,KAAK0R,mBACL1R,KAAK2R,kBACL3R,KAAK4R,uEAIL5R,KAAK6R,WAAWnC,IAAI,+DAGJ,IAAArK,EAAArF,KAChB,OACET,EAAAC,EAAAC,cAAA,OACEkC,UAAU,qDACV4D,IAAK,SAACrD,GAAD,OAAOmD,EAAKwM,WAAaxS,IAAE6C,KAChC3C,EAAAC,EAAAC,cAAA,SACEiP,KAAK,OACL/M,UAAU,4CACVmN,YAAY,SACZF,SAAU5O,KAAK2E,MAAMmN,kBACrBvM,IAAK,SAACrD,GAAD,OAAOmD,EAAK0M,aAAe1S,IAAE6C,MACpC3C,EAAAC,EAAAC,cAAA,UACEiP,KAAK,SACL/M,UAAU,qBACVuE,QAASlG,KAAKgS,oBAAoBjR,KAAKf,OAHzC,6DASJ,OACET,EAAAC,EAAAC,cAAA,UACEkC,UAAU,wCACV+M,KAAK,SACLxI,QAASlG,KAAKiS,4BACd1S,EAAAC,EAAAC,cAAA,QAAMkC,UAAU,aAChBpC,EAAAC,EAAAC,cAAA,QAAMkC,UAAU,aAChBpC,EAAAC,EAAAC,cAAA,QAAMkC,UAAU,iEAKK,IAAAiE,EAAA5F,KACzB,OACET,EAAAC,EAAAC,cAAA,UACEkC,UAAU,qCAAqC+M,KAAK,SACpDxI,QAASlG,KAAKkS,wBAAwBnR,KAAKf,MAC3CuF,IAAK,SAACrD,GAAD,OAAO0D,EAAKuM,cAAgB9S,IAAE6C,KACnC3C,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,kBAAb,wDAMJ,IAAIkF,EAAW,UAKf,OAJK7G,KAAK+E,MAAMoM,cACdtK,GAAY,WAGPA,4CAIP,IAAIA,EAAW,cAKf,OAJI7G,KAAK+E,MAAMoM,cACbtK,GAAY,WAGPA,oDAIF5F,EAAaiG,iBAIdlH,KAAKmS,cAAcC,SAAS,gBAC9BpS,KAAKmS,cAAcvK,YAAY,eAC/BhI,EAAUoB,QAAQ,iBAGlBhB,KAAKmS,cAAcrK,SAAS,eAC5BlI,EAAUoB,QAAQ,oEAIK2G,GACzB,GAAK1G,EAAaiG,eAAlB,CAIA,IAAMmL,EAAahT,IAAEsI,EAAE2K,QACnBD,EAAWD,SAAS,gBACtBC,EAAWzK,YAAY,eACvBhI,EAAUoB,QAAQ,oBAGlBqR,EAAWvK,SAAS,eACpBlI,EAAUoB,QAAQ,gEAIF2G,GAClB3H,KAAK+R,aAAaQ,IAAI,IACtBlT,IAAEsI,EAAE2K,QAAQrK,OACZjI,KAAK2E,MAAMqN,iEAGM,IAAAhL,EAAAhH,KAGjBJ,EAAU0H,UAAU,iBAAkB,SAACiB,GACrCvB,EAAKU,SAAS,CAAEyJ,YAAa5I,EAAKa,mDAIpB,IAAArB,EAAA/H,KAChBJ,EAAU0H,UAAU,eAAgB,WAClCS,EAAKgK,aAAajB,QAClB/I,EAAKgK,aAAaS,2DAIE,IAAA7J,EAAA3I,KAElBiB,EAAaiG,iBACftH,EAAU0H,UAAU,cAAe,WACjCqB,EAAKwJ,cAAcvK,YAAY,iBAGjC5H,KAAK6R,WAAW1K,SAAS,CAAEC,QAAQ,IAEnCpH,KAAK6R,WAAWxK,GAAG,qBAAsB,WACvCzH,EAAUoB,QAAQ,qBAGpBpB,EAAU0H,UAAU,cAAe,WACjCqB,EAAKkJ,WAAW1K,SAAS,UAE3BvH,EAAU0H,UAAU,cAAe,WACjCqB,EAAKkJ,WAAW1K,SAAS,UAG3BvH,EAAU0H,UAAU,YAAa,WACC,KAA5BqB,EAAKoJ,aAAaQ,OACpB3S,EAAUoB,QAAQ,iBAKtBhB,KAAK6R,WAAWxK,GAAG,oBAAqB,WACtCsB,EAAKoJ,aAAajB,kBA7LLnR,aCqBN8S,eAzBb,SAAAA,EAAY9N,EAAOC,GAAS,IAAA7E,EAAA,OAAA+C,OAAAC,EAAA,EAAAD,CAAA9C,KAAAyS,IAC1B1S,EAAA+C,OAAA+B,EAAA,EAAA/B,CAAA9C,KAAA8C,OAAAgC,EAAA,EAAAhC,CAAA2P,GAAAtS,KAAAH,KAAM2E,EAAOC,KAERG,MAAQ,CAAEI,SAAUR,EAAMQ,UAHLpF,yFAMF0H,GACxBzH,KAAK0H,SAAS,CAAEvC,SAAUsC,EAAUtC,4CAIpC,OACE5F,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,cAEX3B,KAAK+E,MAAMI,SAET5F,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,uBAAf,SAEApC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,uBAAf,kBAnBiBhC,aCyBd+S,oLArBX,OACEnT,EAAAC,EAAAC,cAAA,UACEkC,UAAU,oCACVuE,QAASlG,KAAK2S,mBAAmB5R,KAAKf,OAEtCT,EAAAC,EAAAC,cAAA,KAAGkC,UAAU,kBAAb,mDAKagG,GACjBA,EAAEK,iBAEE/G,EAAaiG,gBACftH,EAAUoB,QAAQ,kBAGpBhB,KAAK2E,MAAMgO,4BAnBahT,aCmDbiT,oGAlDF9M,GACT+M,aAAaC,QACXF,EAAYG,QAAQjN,GACpBA,EAAKkN,sCAIElN,GACT,OAAO+M,aAAaI,QAAQL,EAAYG,QAAQjN,qCAGlCoN,GACd,IAAMC,EAAOP,EAAYQ,uBADDC,GAAA,EAAAC,GAAA,EAAAC,OAAA7S,EAAA,IAGxB,QAAA8S,EAAAC,EAAgBN,EAAhBO,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAhL,MAAAyK,GAAA,EAAsB,KAAbrN,EAAawN,EAAA7E,MACdkF,EAAUhB,aAAaI,QAAQjN,GAGrCkN,EAFazP,KAAKqQ,MAAMD,GAETA,IAPO,MAAAE,GAAAT,GAAA,EAAAC,EAAAQ,EAAA,YAAAV,GAAA,MAAAI,EAAAO,QAAAP,EAAAO,SAAA,WAAAV,EAAA,MAAAC,mCAWZzN,GACZ+M,aAAaoB,WAAWrB,EAAYG,QAAQjN,sCAI5C,OAAqD,IAA9C8M,EAAYQ,uBAAuB3R,sDAO1C,IAHA,IAAI0R,EAAO,GACL1R,EAASoR,aAAapR,OAEnBD,EAAI,EAAGA,EAAIC,IAAUD,EAAG,CAC/B,IAAMwE,EAAM6M,aAAa7M,IAAIxE,GAEzBwE,EAAIkO,WAAWtB,EAAYuB,aAC7BhB,EAAK9S,KAAK2F,GAId,OAAOmN,kCAGMrN,GACb,OAAO8M,EAAYuB,WAAarO,EAAKtD,uCAjDrC,MAAO,iBCkHI4R,cA9Gb,SAAAA,EAAYC,GAAevR,OAAAC,EAAA,EAAAD,CAAA9C,KAAAoU,GACzBpU,KAAKsU,qBAAuBD,EAE5BrU,KAAKuU,2EAQLC,YAAYxU,KAAKyU,aAAa1T,KAAKf,MAAOoU,EAASM,oDAG3C5O,GACR9F,KAAKuU,eAAc,GAEnB3B,GAAY+B,IAAI7O,0CAGH,IAAA/F,EAAAC,KACTX,IAAEuV,QAINhC,GAAYiC,SAAS,SAAC/O,EAAM+N,GAC1B,IAAMxL,EAAM,cAAgBvC,EAAKtD,IAEjCnD,IAAE+I,KAAK,CACLC,IAAKA,EACLyM,OAAQ,MACRxM,SAAU,OACVC,KAAM,CAAEzC,KAAMA,KAIf8C,KAAK,SAACmM,GAAD,OAAgBhV,EAAKiV,SAASlP,EAAM+N,EAAStR,EAAKsG,eAAekM,MACtE/L,KAAK,SAACC,EAAKC,EAAQC,GAAd,OAAwBpJ,EAAKkV,SAAShM,EAAKC,EAAQC,EAAOd,6CAItDlD,EAAU4P,QACLrU,IAAbyE,IACFA,EAAWyN,GAAYsC,WAIvB/V,OAAOgW,eADLhQ,OACsBzE,EAGA,WACtB,MAAO,8LAKXV,KAAKsU,qBAAqB,CAAEnP,SAAUA,EAAUW,KAAMiP,qCAG/CjP,EAAM+N,EAASkB,GAEtB,IAAMK,EAAqBxC,GAAYyC,IAAIvP,GAC3C,GAAI+N,IAAYuB,EACdxC,GAAYtS,OAAOwF,OAEhB,CAKH,IAAMA,EAAOvD,EAAKsG,eAAepF,KAAKqQ,MAAMsB,IAC5CtP,EAAK/B,gBAAkBgR,EAAWhR,gBAElC6O,GAAY+B,IAAI7O,GAGlB9F,KAAKuU,mBAAc7T,EAAWqU,oCAGvB9L,EAAKC,EAAQC,EAAOd,GAEJ,IAAnBY,EAAIqM,aAIW,MAAfrM,EAAIC,OACNjK,IAAWmK,KAUT,oLAIoB,MAAfH,EAAIC,OACXjK,IAAWmK,KAAKH,EAAIsM,aAAaC,OAAOC,KAAK,UAG7CxW,IAAWmK,KAAK,4BAA8BD,EAAM7G,YACpD+G,QAAQF,MAAM,QAASd,EAAK,QAASY,EAAK,WAAYC,EAAQ,QAASC,EAAM7G,yDAlG/E,OAAO,aCgPIoT,eA7Ob,SAAAA,EAAY/Q,EAAOC,GAAS,IAAA7E,EAAA+C,OAAAC,EAAA,EAAAD,CAAA9C,KAAA0V,IAC1B3V,EAAA+C,OAAA+B,EAAA,EAAA/B,CAAA9C,KAAA8C,OAAAgC,EAAA,EAAAhC,CAAA4S,GAAAvV,KAAAH,KAAM2E,EAAOC,KAER+Q,UAAY,IAAI5E,GAAUhR,EAAK4E,MAAMiL,SAHhB,IAKlBtG,EAAUvJ,EAAK4E,MAAf2E,MALkB,OAOtB3E,EAAMmB,KACR/F,EAAK6V,kBAAkBjR,EAAMmB,MAEtBwD,EAAMuM,OAAOC,GACpB/V,EAAKgW,oBAAoBzM,EAAMuM,OAAOC,IAGtC/V,EAAKgF,MAAQhF,EAAKiW,uBAGpBjW,EAAKkW,2BAA6BC,IAAS,IAAKnW,EAAKkW,4BAjB3BlW,wEAqB1B,OACER,EAAAC,EAAAC,cAAA,WACGO,KAAKmW,kBACLnW,KAAKyO,6DAKQ,IAAApJ,EAAArF,KAClBA,KAAKoW,SAAW,IAAIhC,GAASpU,KAAKqW,iBAAiBtV,KAAKf,OACxDA,KAAKoW,SAASE,eAEd1W,EAAU0H,UAAU,cAAe,SAACiB,GAClClD,EAAKkR,WAAW,WACd3W,EAAUoB,QAAQ,kBAClBpB,EAAUoB,QAAQ,cAAeuH,OAIrC3I,EAAU0H,UAAU,WAAY,SAACiB,GAC/BlD,EAAKkR,yDAKP,OACEhX,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,OACbpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,aACbpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,oDACbpC,EAAAC,EAAAC,cAAC+W,GAAD,CACE1E,kBAAmB9R,KAAK8R,kBAAkB/Q,KAAKf,MAC/CgS,oBAAqBhS,KAAKgS,oBAAoBjR,KAAKf,QAErDT,EAAAC,EAAAC,cAACgX,GAAD,CAAgBtR,SAAUnF,KAAK+E,MAAMI,sDAQ7C,OACE5F,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,OACbpC,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,YACbpC,EAAAC,EAAAC,cAACiX,EAAD,CACE5P,cAAe9G,KAAK+E,MAAMe,KAAKtD,IAC/B2C,SAAUnF,KAAK+E,MAAMI,SACrB4B,cAAe/G,KAAK+E,MAAMgC,cAC1B3B,YAAapF,KAAK+E,MAAMK,YACxBe,gBAAiBnG,KAAKmG,gBAAgBpF,KAAKf,MAC3CuG,sBAAuBvG,KAAKuG,sBAAsBxF,KAAKf,MACvDsG,uBAAwBtG,KAAKsG,uBAAuBvF,KAAKf,SAE7DT,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,YACbpC,EAAAC,EAAAC,cAACkX,GAAD,CACE7Q,KAAM9F,KAAK+E,MAAMe,KACjBmJ,aAAcjP,KAAK4W,iBAAiB7V,KAAKf,SAE7CT,EAAAC,EAAAC,cAACoX,GAAD,CAAelE,mBAAoB3S,KAAK2S,mBAAmB5R,KAAKf,mDAMpD8F,GAChB9F,KAAK+E,MAAQ,CACXgC,eAAe,EACfjB,KAAMvD,EAAKsG,eAAe/C,IAE5B9F,KAAK2V,UAAUmB,gBAAgBhR,+CAGbgQ,GAAI,IAAAlQ,EAAA5F,KAEtBA,KAAK+E,MAALjC,OAAAiU,EAAA,EAAAjU,CAAA,GACK9C,KAAKgW,uBADV,CAEEjP,eAAe,IAGjB1H,IAAE+I,KAAK,CACLC,IAAG,cAAAsB,OAAgBmM,GACnBxN,SAAU,SAEXM,KAAK,SAACL,GACL,IAAMzC,EAAOvD,EAAKsG,eAAeN,EAAKzC,MACtCF,EAAK8B,SAAS,CACZX,eAAe,EACfjB,KAAMA,GACL,kBAAMF,EAAK+P,UAAUmB,gBAAgBhR,OAEzCkD,KAAK,SAACC,EAAKC,EAAQC,GAClBlK,IAAWmK,KACT,iKAOUtD,EAAM6B,GACpBA,EAAEK,iBAEFhI,KAAK0H,SAAS,CAAE5B,KAAMA,IACtB9F,KAAK2V,UAAUqB,QAAQlR,GACvB9F,KAAK2V,UAAUmB,gBAAgBhR,iDAGXA,EAAM6B,GAAG,IAAAX,EAAAhH,KAC7B2H,EAAEK,iBACFL,EAAEsP,kBAEFC,EAAAvP,EAAA,GAAAwP,KAAAD,EAAAE,EAAArW,KAAA,aAAkBoW,KAAK,SAAAE,GACrBA,EAAQC,QAAQ,2DAA4D,SAACC,GACtEA,IAELvQ,EAAKU,SAAS,CAAEvC,UAAU,IAE1B6B,EAAKwQ,WAAW1R,uDAKCA,EAAM6B,GAAG,IAAAI,EAAA/H,KAC9B2H,EAAEK,iBACFL,EAAEsP,kBAEFC,EAAAvP,EAAA,GAAAwP,KAAAD,EAAAE,EAAArW,KAAA,aAAkBoW,KAAK,SAAAE,GACrBA,EAAQC,QAAQ,8CAA+C,SAACC,GACzDA,IAELzR,EAAK2R,cACL1P,EAAK6O,iBAAiB9Q,GACtBiC,EAAKwO,+DAMTvW,KAAKuW,sDAGUzQ,GACf9F,KAAK2V,UAAUqB,QAAQlR,GAEvB9F,KAAKoW,SAASsB,UAAU5R,4CAGTyC,GACf,IAAIxD,EAAQ,CAAEI,SAAUoD,EAAKpD,UAIzBoD,EAAKzC,MAAQ9F,KAAK+E,MAAMe,KAAKtD,MAAQ+F,EAAKzC,KAAKtD,MACjDuC,EAAMe,KAAO9F,KAAK+E,MAAMe,KACxBf,EAAMe,KAAK/B,gBAAkBwE,EAAKzC,KAAK/B,iBAEzC/D,KAAK0H,SAAS3C,GAEVwD,EAAKpD,UACPnF,KAAK2V,UAAUmB,gBAAgB9W,KAAK+E,MAAMe,gDAI5B6B,GAChBA,EAAEgQ,UACF3X,KAAKiW,2BAA2BtO,sDAGPA,GACzB3H,KAAK0H,SAAS,CAAEtC,YAAauC,EAAE2K,OAAO3D,QACtC/O,EAAUoB,QAAQ,gEAIlBhB,KAAK0H,SAAS,CAAEtC,YAAa,KAC7BxF,EAAUoB,QAAQ,iEAIlB,MAAO,CAAE8E,KAAM,IAAIvD,sCAGVqV,GACT5X,KAAK0H,SAAS1H,KAAKgW,uBAAwB4B,GAC3C5X,KAAK2V,UAAUkC,SACf7X,KAAK2V,UAAUmB,qDAGNhR,GAAM,IAAA6C,EAAA3I,KACfX,IAAE+I,KAAK,CACLC,IAAK,cAAgBvC,EAAKtD,IAC1BsS,OAAQ,SACRxM,SAAU,SAEXM,KAAK,WACJiK,aAAaoB,WAAW,QAAUnO,EAAKtD,KAEnCmG,EAAK5D,MAAMe,KAAKtD,MAAQsD,EAAKtD,KAC/BmG,EAAK4N,eAGRvN,KAAK,SAASC,EAAKC,EAAQC,GAC1B,IAAI2O,EAAU,wCAES,IAAnB7O,EAAIqM,aACNwC,GAAW,gHAEb7Y,IAAWmK,KAAK0O,GAChBzO,QAAQF,MAAM,aAAcrD,EAAKtD,IAAK,WAAY0G,EAAQ,UAAWC,EAAM7G,cAE5EyV,OAAO,WACNpP,EAAKjB,SAAS,CAAEvC,UAAU,aAzOTxF,aCAjBqY,yBAAYC,IAAMC,KAAK,kBAAMhB,EAAAvP,EAAA,GAAAwP,KAAAD,EAAAnW,KAAA,cAC7BoX,GAAmBF,IAAMC,KAAK,kBAAMhB,EAAAvP,EAAA,GAAAwP,KAAAD,EAAAnW,KAAA,aAkF3BqX,eA/Eb,SAAAA,EAAYzT,GAAO,IAAA5E,EAAA,OAAA+C,OAAAC,EAAA,EAAAD,CAAA9C,KAAAoY,IACjBrY,EAAA+C,OAAA+B,EAAA,EAAA/B,CAAA9C,KAAA8C,OAAAgC,EAAA,EAAAhC,CAAAsV,GAAAjY,KAAAH,KAAM2E,KAEDI,MAAQ,CACXsT,WAAY,MAGdtY,EAAKuY,gBAPYvY,wEAWjB,OACER,EAAAC,EAAAC,cAAC8Y,EAAA,EAAD,KACEhZ,EAAAC,EAAAC,cAAA,OAAKkC,UAAU,mBACbpC,EAAAC,EAAAC,cAAC+Y,EAAD,MACExY,KAAKyY,iBACLzY,KAAK0Y,gEAObrZ,IAAEsZ,SAASC,gDAIX5Y,KAAK0H,SAAS,CAAE2Q,YAAY,4CAGd,IAAAhT,EAAArF,KACdX,IAAE+I,KAAK,CACLC,IAAK,0BACLyM,OAAQ,MACRxM,SAAU,SAEXM,KAAK,SAACL,EAAMW,EAAQD,GACnB5D,EAAKwT,mBAEN7P,KAAK,WACJ3D,EAAKqC,SAAS,CAAE2Q,YAAY,+CAK9B,IAA8B,IAA1BrY,KAAK+E,MAAMsT,WACb,OACE9Y,EAAAC,EAAAC,cAACqZ,EAAA,EAAD,KACEvZ,EAAAC,EAAAC,cAACsZ,EAAA,EAAD,CAAOC,KAAK,aAAaC,UAAYvD,KACrCnW,EAAAC,EAAAC,cAACsZ,EAAA,EAAD,CAAOC,KAAK,SAASC,UAAYvD,KACjCnW,EAAAC,EAAAC,cAACyZ,EAAA,EAAD,CAAUC,KAAK,IAAIC,GAAG,sDAMZ,IAAAxT,EAAA5F,KAChB,IAA8B,IAA1BA,KAAK+E,MAAMsT,WACb,OACE9Y,EAAAC,EAAAC,cAACqZ,EAAA,EAAD,KACEvZ,EAAAC,EAAAC,cAACsZ,EAAA,EAAD,CAAOC,KAAK,YAAYK,OAAQ,SAAA1U,GAAK,OACnCpF,EAAAC,EAAAC,cAAC6Z,EAAA,SAAD,CAAUC,SAAUha,EAAAC,EAAAC,cAAA,aAClBF,EAAAC,EAAAC,cAAC0Y,GAADrV,OAAA0W,OAAA,CAAkBX,eAAgBjT,EAAKiT,eAAe9X,KAAK6E,IAAWjB,QAI1EpF,EAAAC,EAAAC,cAACsZ,EAAA,EAAD,CAAOC,KAAK,SAASK,OAAQ,SAAA1U,GAAK,OAChCpF,EAAAC,EAAAC,cAAC6Z,EAAA,SAAD,CAAUC,SAAUha,EAAAC,EAAAC,cAAA,aAClBF,EAAAC,EAAAC,cAACuY,GAAD,CAAWa,eAAgBjT,EAAKiT,eAAe9X,KAAK6E,GAAO6T,iBAAkBta,OAAOua,yBAIxFna,EAAAC,EAAAC,cAACyZ,EAAA,EAAD,CAAUE,GAAG,mBAzELzZ,aCRZga,GAAcC,QACW,cAA7Bza,OAAO6R,SAAS6I,UAEe,UAA7B1a,OAAO6R,SAAS6I,UAEhB1a,OAAO6R,SAAS6I,SAASvQ,MACvB,2DAsCN,SAASwQ,GAAgBC,GACvBC,UAAUC,cACPC,SAASH,GACT5C,KAAK,SAAAgD,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBtV,QACfiV,UAAUC,cAAcO,WAK1BnR,QAAQoR,IAAI,6CAKZpR,QAAQoR,IAAI,2CAMrBC,MAAM,SAAAvR,GACLE,QAAQF,MAAM,4CAA6CA,KCzE/DhK,OAAOS,UAAYA,EACnBT,OAAOO,YAAcA,IACrBP,OAAOF,WAAaA,ICHfE,OAAOwb,UAEZtb,IAAEub,cAAc,SAASC,GACvBA,EAAQxS,IAAMlJ,OAAOwb,SAAWE,EAAQxS,MCG5CyS,IAASzB,OAAO9Z,EAAAC,EAAAC,cAACsb,GAAD,MAAS3Z,SAAS4Z,eAAe,SHSlC,WACb,GAA6C,kBAAmBhB,UAAW,CAGzE,GADkB,IAAIiB,IAAIC,IAAwB/b,OAAO6R,UAC3CmK,SAAWhc,OAAO6R,SAASmK,OAIvC,OAGFhc,OAAOic,iBAAiB,OAAQ,WAC9B,IAAMrB,EAAK,GAAApQ,OAAMuR,IAAN,sBAEPvB,IAiDV,SAAiCI,GAE/BsB,MAAMtB,GACH5C,KAAK,SAAAmE,GAGkB,MAApBA,EAASpS,SACuD,IAAhEoS,EAASC,QAAQlG,IAAI,gBAAgBmG,QAAQ,cAG7CxB,UAAUC,cAAcwB,MAAMtE,KAAK,SAAAgD,GACjCA,EAAauB,aAAavE,KAAK,WAC7BhY,OAAO6R,SAAS2K,aAKpB7B,GAAgBC,KAGnBW,MAAM,WACLrR,QAAQoR,IACN,mEArEAmB,CAAwB7B,GAIxBC,UAAUC,cAAcwB,MAAMtE,KAAK,WACjC9N,QAAQoR,IACN,+GAMJX,GAAgBC,MGpCxB8B,GCPe,WACb,IAAIC,OAAYpb,EAEhBrB,IAAE+B,UAAU2a,UAAU,WACpBC,aAAaF,GAEbA,EAAYG,WAAW,WACrBrc,EAAUoB,QAAQ,iBAAkB,CAAEoI,MAAM,KAC3C,OAGL/J,IAAE+B,UAAU8a,SAAS,WACnBF,aAAaF,GAEblc,EAAUoB,QAAQ,iBAAkB,CAAEoI,MAAM,MDLhD+S,2EEZMzc,oLAEF,MAAO,yDAIP,MAAO,0BANeR,GAUXQ,8GCTTR,cACJ,SAAAA,EAAYyF,EAAOC,GAAS,IAAA7E,EAAA,OAAA+C,OAAAsZ,EAAA,EAAAtZ,CAAA9C,KAAAd,IAC1Ba,EAAA+C,OAAAuZ,EAAA,EAAAvZ,CAAA9C,KAAA8C,OAAAwZ,EAAA,EAAAxZ,CAAA5D,GAAAiB,KAAAH,KAAM2E,EAAOC,KAERG,MAAQ,CAAE+S,QAASnT,EAAMmT,SAHJ/X,wEAO1B,OAAKC,KAAK+E,MAAM+S,QAKdyE,EAAA/c,EAAAC,cAAA,OAAKkC,UAAU,OACb4a,EAAA/c,EAAAC,cAAA,OAAKkC,UAAU,4BACb4a,EAAA/c,EAAAC,cAAA,OAAKkC,UAAW3B,KAAKwc,eACnBD,EAAA/c,EAAAC,cAAA,UAAQkC,UAAU,QAAQ+M,KAAK,SAASxI,QAASlG,KAAKyc,YAAY1b,KAAKf,OAAvE,QACAuc,EAAA/c,EAAAC,cAAA,OAAKid,wBAAyB,CAAEC,OAAQ3c,KAAK+E,MAAM+S,cARlD,2CAkBT,MAFiB,CAAC,QAAS,oBAAqB9X,KAAK4c,yBAEnCnH,KAAK,2CAIvBzV,KAAK0H,SAAS,CAAEoQ,QAAS,mDAGP,IAAAzS,EAAArF,KAElBX,IAAE+B,UAAUiG,GAAGrH,KAAK6c,YAAYC,eAAgB,SAACnV,EAAGY,GAClDlD,EAAKqC,SAAS,CAAEoQ,QAASvP,EAAKuP,2DAKhCzY,IAAE+B,UAAUsO,IAAI1P,KAAK6c,YAAYC,6IAUjC,MAAO,kBAAoB9c,KAAKa,UAAUkc,uCAGhCjF,GACVzY,IAAE+B,UAAU4b,QAAQhd,KAAK8c,eAAgB,CAAEhF,QAASA,oCAIpDzY,IAAE+B,UAAU4b,QAAQhd,KAAK8c,eAAgB,CAAEhF,QAAS,cA5D5BnY,aAgEbT,0BCnEf+d,EAAAC,QAAiBhG,EAAAiG,EAAuB","file":"static/js/main.46f36b95.chunk.js","sourcesContent":["import AbstractFlash from './AbstractFlash';\n\nclass AlertFlash extends AbstractFlash {\n  getName() {\n    return 'alert';\n  }\n\n  getAdditionalCssClass() {\n    return 'alert-warning';\n  }\n}\n\nexport default AlertFlash;\n","import $ from 'jquery';\n\nwindow.jQuery = $;\nwindow.$ = $;\n","import React, { Component } from 'react';\nimport NoticeFlash from './NoticeFlash';\nimport AlertFlash from './AlertFlash';\n\nclass Flash extends Component {\n  render() {\n    return (\n      <div>\n        <NoticeFlash />\n        <AlertFlash />\n      </div>\n    );\n  }\n}\n\nexport default Flash;\n","// credits to https://davidwalsh.name/pubsub-javascript\nclass EventHive {\n  static get topics() {\n    if (typeof this._topics === 'undefined') {\n      this._topics = {};\n    }\n    return this._topics;\n  }\n\n  static subscribe(topic, listener) {\n    // Create the topic's object if not yet created\n    if (!this.topics.hasOwnProperty.call(this.topics, topic)) {\n      this.topics[topic] = [];\n    }\n\n    // Add the listener to queue\n    var index = this.topics[topic].push(listener) -1;\n\n    // Provide handle back for removal of topic\n    return {\n      remove: () => {\n        delete this.topics[topic][index];\n      }\n    };\n  }\n\n  static publish(topic, info) {\n    // If the topic doesn't exist, or there's no listeners in queue, just leave\n    if (!this.topics.hasOwnProperty.call(this.topics, topic)) {\n      return;\n    }\n\n    // Cycle through topics queue, fire!\n    this.topics[topic].forEach(function(item) {\n      item(info !== undefined ? info : {});\n    });\n  }\n}\n\nexport default EventHive;\n","import Mousetrap from 'mousetrap'\nimport EventHive from './EventHive';\n\n// always fire shortcuts inside input fields\nMousetrap.prototype.stopCallback = function() { return false }\n\nMousetrap.bind('alt+shift+f', function() {\n  EventHive.publish('search.focus');\n\n  return false;\n});\n\nMousetrap.bind('alt+shift+n', function() {\n  EventHive.publish('note.new');\n\n  return false;\n});\n","// https://stackoverflow.com/questions/19462672/jquery-detect-bootstrap-3-state/24884634#24884634\nclass ViewportMode {\n  static getMode() {\n    const envs = [\"xs\", \"sm\", \"md\", \"lg\"];\n    const doc = window.document;\n    const temp = doc.createElement(\"div\");\n\n    doc.body.appendChild(temp);\n\n    for (let i = envs.length - 1; i >= 0; i--) {\n      const env = envs[i];\n\n      temp.className = \"hidden-\" + env;\n\n      if (temp.offsetParent === null) {\n        doc.body.removeChild(temp);\n        return env;\n      }\n    }\n    return \"\";\n  }\n\n  static isMobileMode() {\n    const mode = this.getMode();\n    return mode === 'xs' || mode === 'sm';\n  }\n}\n\nexport default ViewportMode;\n","class Uuid  {\n  static generateV4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n      var r = Math.random() * 16 | 0, v = c === 'x' ? r : ((r & 0x3) | 0x8);\n      return v.toString(16);\n    });\n  }\n}\n\nexport default Uuid;\n","import Uuid from './Uuid';\n\nclass Note {\n  constructor(uid, title, content, createdAt, updatedAt, archivedAt) {\n    this._uid = uid || Uuid.generateV4();\n    this._title = title || '';\n    this._content = content || '';\n    this._createdAt = createdAt || new Date();\n    this._updatedAt = updatedAt || this._createdAt;\n    this._serverUpdatedAt = this._updatedAt;\n    this._archivedAt = archivedAt;\n  }\n\n  get uid() { return this._uid }\n\n  get title() { return this._title }\n  set title(title) {\n    this._updatedAt = new Date();\n    this._title = title;\n  }\n\n  get content() { return this._content }\n  set content(content) {\n    this._updatedAt = new Date();\n    this._content = content;\n  }\n\n  get createdAt() { return this._createdAt }\n  get updatedAt() { return this._updatedAt }\n\n  get serverUpdatedAt() { return this._serverUpdatedAt }\n  set serverUpdatedAt(serverUpdatedAt) { this._serverUpdatedAt = serverUpdatedAt }\n\n  get archivedAt() { return this._archivedAt; }\n\n  setArchived() {\n    this._archivedAt = new Date();\n  }\n\n  isNew() {\n    return !this.title && !this.content;\n  }\n\n  toJson() {\n    return JSON.stringify(\n      {\n        uid: this.uid,\n        title: this.title,\n        content: this.content,\n        created_at: this.createdAt.toISOString(),\n        updated_at: this.updatedAt.toISOString(),\n        server_updated_at: this.serverUpdatedAt.toISOString(),\n        archived_at: this.archivedAt ? this.archivedAt.toISOString() : null\n      }\n    );\n  }\n\n  static fromAttributes(attributes) {\n    return new Note(\n      attributes.uid,\n      attributes.title,\n      attributes.content,\n      new Date(attributes.created_at),\n      new Date(attributes.updated_at),\n      attributes.archived_at ? new Date(attributes.archived_at) : null\n    );\n  }\n}\n\nexport default Note;\n","import React from 'react';\n\nfunction Spinner() {\n  return (\n    <svg\n      className=\"spinner\"\n      viewBox=\"0 0 66 66\"\n      xmlns=\"http://www.w3.org/2000/svg\">\n      <circle\n        className=\"path\"\n        fill=\"none\"\n        strokeWidth=\"6\"\n        strokeLinecap=\"round\"\n        cx=\"33\"\n        cy=\"33\"\n        r=\"30\"></circle>\n    </svg>\n  );\n}\n\nexport default Spinner;\n","import React, { Component } from 'react';\nimport humanDate from 'human-date';\nimport $ from 'jquery';\nimport ViewportMode from './ViewportMode';\nimport EventHive from './EventHive';\nimport Note from './Note';\nimport AlertFlash from './AlertFlash';\nimport Spinner from './Spinner';\n\nimport './NoteList.css';\n\nclass NoteList extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      notes: [],\n      currentPage: 1,\n      hasMorePages: false,\n      isSynced: false,\n      searchQuery: undefined\n    };\n  }\n\n  render() {\n    return (\n      <div className={this.getListCssClass()} ref={(c) => this.$list = $(c)}>\n        {this.renderList()}\n        {this.renderNextPageLink()}\n        {this.renderListSpinner()}\n      </div>\n    );\n  }\n\n  renderList() {\n    return this.state.notes.map((note) => this.renderListItem(note));\n  }\n\n  renderListItem(note) {\n    return (\n      <div key={note.uid}>\n        <div\n          className={this.getListItemCssClass(note)}\n          onClick={this.handleNoteClick.bind(this, note)}>\n\n          <div className=\"row-picture\">\n            {this.getNoteAvatar(note)}\n          </div>\n          <div className=\"row-content\">\n            {this.renderListItemButton('action-secondary action-secondary-before', this.props.handleArchiveNoteClick.bind(this, note), 'archive')}\n            {this.renderListItemButton('action-secondary', this.props.handleDeleteNoteClick.bind(this, note), 'delete')}\n            <h4 className=\"list-group-item-heading\">\n              {note.title}\n            </h4>\n            <div className=\"list-group-item-text\">\n              {humanDate.relativeTime(note.updatedAt)}\n            </div>\n          </div>\n        </div>\n        <div className=\"list-group-separator\"></div>\n      </div>\n    );\n  }\n\n  renderListItemButton(className, onClick, icon) {\n    return (\n      <div\n        className={className}\n        onClick={onClick}>\n        <i className=\"material-icons\">{icon}</i>\n      </div>\n    );\n  }\n\n  renderNextPageLink() {\n    if (!this.state.hasMorePages) { return; }\n\n    return (\n      <div className=\"list-more list-more-next-page\">\n        <button onClick={this.handleNextPageClick.bind(this)} className=\"btn btn-info btn-link btn-sm\">\n          <i className=\"material-icons list-more-icon\">expand_more</i>\n        </button>\n      </div>\n    );\n  }\n\n  renderListSpinner() {\n    return (\n      <div className=\"list-more list-more-spinner hidden\">\n        <Spinner />\n      </div>\n    );\n  }\n\n  getListItemCssClass(note) {\n    let cssClass = 'list-group-item note-navigation-item';\n    if (note.uid === this.props.activeNoteUid) {\n      cssClass += ' active';\n    }\n\n    return cssClass;\n  }\n\n  getListCssClass() {\n    // in-sm: show always for non-mobile view\n    let cssClass = 'list-group notes-list collapse in-sm';\n    // show on mobile when not accessing a direct edit url\n    if (!this.props.isInitialEdit) {\n      cssClass += ' in';\n    }\n\n    return cssClass;\n  }\n\n  componentDidMount() {\n    this.toggleListMore(false);\n\n    // handle hamburger and search toggling\n    if (ViewportMode.isMobileMode()) {\n      this.$list.collapse({ toggle: false });\n      // when the hiding animation is done\n      this.$list.on('hidden.bs.collapse', () => {\n        EventHive.publish('hamburger.hide_end');\n      });\n\n      EventHive.subscribe('hamburger.show', () => {\n        this.$list.collapse('show');\n      });\n      EventHive.subscribe('hamburger.hide', () => {\n        this.$list.collapse('hide');\n      });\n\n      EventHive.subscribe('search.entered', () => {\n        this.$list.collapse('show');\n      });\n\n      EventHive.subscribe('note.open', () => {\n        this.$list.collapse('hide');\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.listNeedsUpdate) {\n      this.listNeedsUpdate = false;\n      this.updateList();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!this.state.isSynced && nextProps.isSynced) {\n      this.listNeedsUpdate = true;\n    }\n\n    if (this.state.searchQuery !== nextProps.searchQuery) {\n      this.listNeedsUpdate = true;\n    }\n\n    this.setState( {\n      isSynced: nextProps.isSynced,\n      searchQuery: nextProps.searchQuery\n    });\n  }\n\n  handleNoteClick(note, e) {\n    $('.note-navigation-item').removeClass('active');\n    $(e.currentTarget).addClass('active');\n\n    if (ViewportMode.isMobileMode()) {\n      EventHive.publish('hamburger.hide');\n    }\n\n    EventHive.publish('note.open');\n    this.props.handleNoteClick(note, e);\n  }\n\n  handleNextPageClick(e) {\n    e.preventDefault();\n    $(e.currentTarget).blur();\n\n    this.toggleListMore(false);\n\n    this.setState({ currentPage: this.state.currentPage + 1 }, () => {\n      this.updateList();\n    });\n  }\n\n  updateList() {\n    if (this.updateListRequest) {\n      this.updateListRequest.abort();\n    }\n\n    this.updateListRequest = $.ajax({\n      url: '/api/notes',\n      dataType: 'json',\n      data: { search: this.state.searchQuery, page: this.state.currentPage }\n    });\n\n    this.executeUpdateListRequest();\n  }\n\n  executeUpdateListRequest() {\n    this.updateListRequest\n      .done((data) => {\n        this.toggleListMore(true);\n\n        const notes = data.notes.map(function(note) {\n          return Note.fromAttributes(note);\n        });\n\n        this.setState({\n          notes: notes,\n          currentPage: data.current_page,\n          hasMorePages: data.has_more_pages\n        });\n      })\n      .fail((xhr, status, error) => {\n        // it's not a failure when the request was aborted by a subsequent\n        // request (see call to `abort()` above).\n        if (error === 'abort') {\n          return;\n        }\n\n        this.toggleListMore(true);\n\n        AlertFlash.show('Watch out, the list is not up to date.');\n        console.error('url: ', this.props.url, 'status: ', status, 'error: ', error.toString());\n      });\n  }\n\n  getPreviewImageUrl(note) {\n    var match = note.content.match(/<img.*? src=['\"]([^'\"]+)['\"].*?>/);\n    if (match) {\n      return match[1];\n    }\n    else {\n      return null;\n    }\n  }\n\n  getNoteAvatar(note) {\n    var previewImageUrl = this.getPreviewImageUrl(note);\n    if (previewImageUrl) {\n      const style = {\n        backgroundImage: `url(${previewImageUrl})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover'\n      };\n\n      return <i style={style} className=\"circle\" alt=\"note thumbnail\"></i>;\n    }\n    else {\n      return <i className=\"material-icons\">subject</i>;\n    }\n  }\n\n  toggleListMore(linkIsVisible) {\n    if (linkIsVisible) {\n      $('.list-more-next-page').removeClass('hidden');\n      $('.list-more-spinner').addClass('hidden');\n    }\n    else {\n      $('.list-more-next-page').addClass('hidden');\n      $('.list-more-spinner').removeClass('hidden');\n    }\n  }\n}\n\nexport default NoteList;\n","import highlight from 'highlight.js/lib/highlight';\n\nimport asciidoc from 'highlight.js/lib/languages/asciidoc';\nimport bash from 'highlight.js/lib/languages/bash';\nimport basic from 'highlight.js/lib/languages/basic';\nimport clean from 'highlight.js/lib/languages/clean';\nimport clojure from 'highlight.js/lib/languages/clojure';\nimport cmake from 'highlight.js/lib/languages/cmake';\nimport coffeescript from 'highlight.js/lib/languages/coffeescript';\nimport cpp from 'highlight.js/lib/languages/cpp';\nimport crystal from 'highlight.js/lib/languages/crystal';\nimport cs from 'highlight.js/lib/languages/cs';\nimport css from 'highlight.js/lib/languages/css';\nimport d from 'highlight.js/lib/languages/d';\nimport dart from 'highlight.js/lib/languages/dart';\nimport diff from 'highlight.js/lib/languages/diff';\nimport dockerfile from 'highlight.js/lib/languages/dockerfile';\nimport ebnf from 'highlight.js/lib/languages/ebnf';\nimport elixir from 'highlight.js/lib/languages/elixir';\nimport elm from 'highlight.js/lib/languages/elm';\nimport erb from 'highlight.js/lib/languages/erb';\nimport erlang from 'highlight.js/lib/languages/erlang';\nimport fsharp from 'highlight.js/lib/languages/fsharp';\nimport gherkin from 'highlight.js/lib/languages/gherkin';\nimport go from 'highlight.js/lib/languages/go';\nimport gradle from 'highlight.js/lib/languages/gradle';\nimport groovy from 'highlight.js/lib/languages/groovy';\nimport haml from 'highlight.js/lib/languages/haml';\nimport handlebars from 'highlight.js/lib/languages/handlebars';\nimport htmlbars from 'highlight.js/lib/languages/htmlbars';\nimport http from 'highlight.js/lib/languages/http';\nimport ini from 'highlight.js/lib/languages/ini';\nimport java from 'highlight.js/lib/languages/java';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport json from 'highlight.js/lib/languages/json';\nimport kotlin from 'highlight.js/lib/languages/kotlin';\nimport less from 'highlight.js/lib/languages/less';\nimport lisp from 'highlight.js/lib/languages/lisp';\nimport llvm from 'highlight.js/lib/languages/llvm';\nimport makefile from 'highlight.js/lib/languages/makefile';\nimport markdown from 'highlight.js/lib/languages/markdown';\nimport mathematica from 'highlight.js/lib/languages/mathematica';\nimport matlab from 'highlight.js/lib/languages/matlab';\nimport nginx from 'highlight.js/lib/languages/nginx';\nimport objectivec from 'highlight.js/lib/languages/objectivec';\nimport perl from 'highlight.js/lib/languages/perl';\nimport pgsql from 'highlight.js/lib/languages/pgsql';\nimport php from 'highlight.js/lib/languages/php';\nimport plaintext from 'highlight.js/lib/languages/plaintext';\nimport powershell from 'highlight.js/lib/languages/powershell';\nimport prolog from 'highlight.js/lib/languages/prolog';\nimport properties from 'highlight.js/lib/languages/properties';\nimport python from 'highlight.js/lib/languages/python';\nimport r from 'highlight.js/lib/languages/r';\nimport ruby from 'highlight.js/lib/languages/ruby';\nimport rust from 'highlight.js/lib/languages/rust';\nimport scala from 'highlight.js/lib/languages/scala';\nimport scss from 'highlight.js/lib/languages/scss';\nimport shell from 'highlight.js/lib/languages/shell';\nimport sql from 'highlight.js/lib/languages/sql';\nimport stylus from 'highlight.js/lib/languages/stylus';\nimport swift from 'highlight.js/lib/languages/swift';\nimport tex from 'highlight.js/lib/languages/tex';\nimport typescript from 'highlight.js/lib/languages/typescript';\nimport vim from 'highlight.js/lib/languages/vim';\nimport xml from 'highlight.js/lib/languages/xml';\nimport yaml from 'highlight.js/lib/languages/yaml';\n\nimport 'highlight.js/styles/railscasts.css';\n\nhighlight.registerLanguage('asciidoc', asciidoc);\nhighlight.registerLanguage('bash', bash);\nhighlight.registerLanguage('basic', basic);\nhighlight.registerLanguage('clean', clean);\nhighlight.registerLanguage('clojure', clojure);\nhighlight.registerLanguage('cmake', cmake);\nhighlight.registerLanguage('coffeescript', coffeescript);\nhighlight.registerLanguage('cpp', cpp);\nhighlight.registerLanguage('crystal', crystal);\nhighlight.registerLanguage('cs', cs);\nhighlight.registerLanguage('css', css);\nhighlight.registerLanguage('d', d);\nhighlight.registerLanguage('dart', dart);\nhighlight.registerLanguage('diff', diff);\nhighlight.registerLanguage('dockerfile', dockerfile);\nhighlight.registerLanguage('ebnf', ebnf);\nhighlight.registerLanguage('elixir', elixir);\nhighlight.registerLanguage('elm', elm);\nhighlight.registerLanguage('erb', erb);\nhighlight.registerLanguage('erlang', erlang);\nhighlight.registerLanguage('fsharp', fsharp);\nhighlight.registerLanguage('gherkin', gherkin);\nhighlight.registerLanguage('go', go);\nhighlight.registerLanguage('gradle', gradle);\nhighlight.registerLanguage('groovy', groovy);\nhighlight.registerLanguage('haml', haml);\nhighlight.registerLanguage('handlebars', handlebars);\nhighlight.registerLanguage('htmlbars', htmlbars);\nhighlight.registerLanguage('http', http);\nhighlight.registerLanguage('ini', ini);\nhighlight.registerLanguage('java', java);\nhighlight.registerLanguage('javascript', javascript);\nhighlight.registerLanguage('json', json);\nhighlight.registerLanguage('kotlin', kotlin);\nhighlight.registerLanguage('less', less);\nhighlight.registerLanguage('lisp', lisp);\nhighlight.registerLanguage('llvm', llvm);\nhighlight.registerLanguage('makefile', makefile);\nhighlight.registerLanguage('markdown', markdown);\nhighlight.registerLanguage('mathematica', mathematica);\nhighlight.registerLanguage('matlab', matlab);\nhighlight.registerLanguage('nginx', nginx);\nhighlight.registerLanguage('objectivec', objectivec);\nhighlight.registerLanguage('perl', perl);\nhighlight.registerLanguage('pgsql', pgsql);\nhighlight.registerLanguage('php', php);\nhighlight.registerLanguage('plaintext', plaintext);\nhighlight.registerLanguage('powershell', powershell);\nhighlight.registerLanguage('prolog', prolog);\nhighlight.registerLanguage('properties', properties);\nhighlight.registerLanguage('python', python);\nhighlight.registerLanguage('r', r);\nhighlight.registerLanguage('ruby', ruby);\nhighlight.registerLanguage('rust', rust);\nhighlight.registerLanguage('scala', scala);\nhighlight.registerLanguage('scss', scss);\nhighlight.registerLanguage('shell', shell);\nhighlight.registerLanguage('sql', sql);\nhighlight.registerLanguage('stylus', stylus);\nhighlight.registerLanguage('swift', swift);\nhighlight.registerLanguage('tex', tex);\nhighlight.registerLanguage('typescript', typescript);\nhighlight.registerLanguage('vim', vim);\nhighlight.registerLanguage('xml', xml);\nhighlight.registerLanguage('yaml', yaml);\n\nwindow.hljs = highlight;\n","import './highlight.js';\nimport React, { Component } from 'react';\nimport Quill from 'quill';\nimport 'quill-task-list/task_list_node';\nimport 'quill/dist/quill.snow.css';\nimport './NoteForm.css';\nimport EventHive from './EventHive';\nimport ViewportMode from './ViewportMode';\n\nclass NoteForm extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {\n      note: this.props.note\n    };\n\n    this.shouldRerender = true;\n  }\n\n  render() {\n    return (\n      <div>\n        <form\n          className=\"form-horizontal\"\n          ref={(c) => this.formContainerElement = c}\n          onSubmit={this.handleFormSubmit}>\n          <div className=\"form-inputs\">\n            {this.renderTitle()}\n            {this.renderContent()}\n          </div>\n        </form>\n      </div>\n    );\n  }\n\n  renderTitle() {\n    return (\n      <div className=\"form-group form-group-no-label string optional\">\n        <input\n          type=\"text\"\n          className=\"string optional form-control\"\n          value={this.state.note.title}\n          onChange={this.handleTitleChange.bind(this)}\n          placeholder=\"Title\"\n          ref={(c) => this.titleElement = c}\n        />\n      </div>\n    );\n  }\n\n  renderContent() {\n    return (\n      <div className=\"form-group form-group-no-label text optional\">\n        <div\n          ref={(c) => this.contentContainerElement = c}\n        ></div>\n      </div>\n    );\n  }\n\n  // prevent form submission by hitting enter.\n  // changes will be asynchronously saved by ajax.\n  handleFormSubmit(e) {\n    e.preventDefault();\n    return false;\n  }\n\n  handleTitleChange() {\n    this.shouldRerender = true;\n    const note = this.state.note;\n    note.title = this.titleElement.value;\n    this.setState({ note: note }, this.handleChange);\n  }\n\n  handleContentChange() {\n    this.shouldRerender = false;\n    const note = this.state.note;\n    note.content = this.contentElement.innerHTML;\n    this.setState({ note: note }, this.handleChange);\n  }\n\n  handleChange() {\n    this.props.handleChange(this.state.note);\n  }\n\n  componentDidMount() {\n    this.focusTitleFieldIfNewNote();\n    this.renderEditor();\n\n    // when updating the note from outside (e.g. from the mobile app), in which\n    // case a sync to the server should be triggered. if we just use the react\n    // eventing the rte won't detect the changes.\n    EventHive.subscribe('note.update', (data) => {\n      this.titleElement.value = data.title;\n      this.handleTitleChange();\n      this.editor.pasteHTML(data.content);\n    });\n\n    if (ViewportMode.isMobileMode()) {\n      EventHive.subscribe('hamburger.show', () => {\n        this.formContainerElement.classList.add('hidden');\n      });\n      EventHive.subscribe('hamburger.hide', () => {\n        this.formContainerElement.classList.remove('hidden');\n      });\n\n      EventHive.subscribe('search.entered', () => {\n        this.formContainerElement.classList.add('hidden');\n      });\n    }\n  }\n\n  // gets called initially and when a note is switched\n  componentDidUpdate() {\n    this.editor.off('text-change');\n    // reset the content before inserting the actual content.\n    // presumably because of change tracking (delta stuff) in quill the\n    // insertion of big content hangs the browser for several seconds.\n    this.editor.setText('');\n    this.contentElement.innerHTML = this.state.note.content;\n    this.editor.history.clear();\n    // wait on updates before attaching the `text-change` event\n    this.editor.update();\n    this.editor.on('text-change', this.handleContentChange.bind(this));\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // a different note is shown.\n    if (nextProps.note.uid !== this.state.note.uid) {\n      this.shouldRerender = true;\n      this.setState({\n        note: nextProps.note\n      }, () => this.focusTitleFieldIfNewNote());\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // don't rerender if the RTE content changes. the cursor jumps to the\n    // beginning of the content if we re-initialize the RTE content.\n    return this.shouldRerender;\n  }\n\n  renderEditor() {\n    this.editor = new Quill(this.contentContainerElement, {\n      theme: 'snow',\n      modules: {\n        'syntax': true,\n        'toolbar': [\n          [{ 'header': [1, 2, false] }],\n          ['bold', 'italic', 'strike'],\n          [{ 'color': [] }, { 'background': [] }],\n          ['blockquote', 'code-block'],\n          [\n            { 'list': 'ordered' }, { 'list': 'bullet' }, 'task-list',\n            { 'indent': '-1' }, { 'indent': '+1' }\n          ],\n          ['link', 'image'],\n          ['clean']\n        ],\n        'task-list': true\n      }\n    });\n\n    this.contentElement = this.contentContainerElement.querySelector('.ql-editor');\n  }\n\n  focusTitleFieldIfNewNote() {\n    if (this.state.note.isNew()) {\n      this.titleElement.focus();\n    }\n  }\n}\n\nexport default NoteForm;\n","class PushState {\n  constructor(history) {\n    this.history = history;\n  }\n\n  setNew() {\n    this.history.push('/notes');\n  }\n\n  setEdit(note) {\n    const url = `/notes/${note.uid}`;\n\n    if (this.history.location.pathname !== url) {\n      this.history.push(url);\n    }\n  }\n\n  setBrowserTitle(note) {\n    if (note && note.title) {\n      document.title = `${note.title} | Mykonote`;\n    }\n    else {\n      document.title = 'Mykonote';\n    }\n  }\n}\n\nexport default PushState;\n","import React, { Component } from 'react';\nimport $ from 'jquery';\nimport EventHive from './EventHive';\nimport ViewportMode from './ViewportMode';\nimport Spinner from './Spinner';\nimport logo from './images/logo.svg';\n\nclass Navbar extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = { showSpinner: false };\n  }\n\n  render() {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <div className=\"navbar-header\">\n            {this.renderLogo()}\n            {this.renderMobileHamburgerMenu()}\n            {this.renderMobileSearchButton()}\n          </div>\n          {this.renderSearchBox()}\n        </div>\n      </div>\n    );\n  }\n\n  renderLogo() {\n    return (\n      <div className=\"navbar-brand\">\n        <div className=\"navbar-spinner\">\n          {this.state.showSpinner ? (\n            <Spinner />\n          ) : (\n            <div className=\"navbar-logo\">\n              <img src={logo} alt=\"logo\" />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.subscribeSpinner();\n    this.subscribeSearch();\n    this.subscribeMobileSearch();\n  }\n\n  componentWillUnmount() {\n    this.$searchBox.off('shown.bs.collapse');\n  }\n\n  renderSearchBox() {\n    return (\n      <div\n        className=\"navbar-form navbar-right search-bar collapse in-sm\"\n        ref={(c) => this.$searchBox = $(c)}>\n        <input\n          type=\"text\"\n          className=\"string optional form-control search-input\"\n          placeholder=\"Search\"\n          onChange={this.props.handleSearchEnter}\n          ref={(c) => this.$searchInput = $(c)} />\n        <button\n          type=\"button\"\n          className=\"close clear-search\"\n          onClick={this.handleSearchCleared.bind(this)}>×</button>\n      </div>\n    );\n  }\n\n  renderMobileHamburgerMenu() {\n    return (\n      <button\n        className=\"navbar-toggle navbar-hamburger-button\"\n        type=\"button\"\n        onClick={this.handleHamburgerButtonClick}>\n        <span className=\"icon-bar\"></span>\n        <span className=\"icon-bar\"></span>\n        <span className=\"icon-bar\"></span>\n      </button>\n    );\n  }\n\n  renderMobileSearchButton() {\n    return (\n      <button\n        className=\"navbar-toggle navbar-search-button\" type=\"button\"\n        onClick={this.handleSearchButtonClick.bind(this)}\n        ref={(c) => this.$searchButton = $(c)}>\n        <i className=\"material-icons\">search</i>\n      </button>\n    );\n  }\n\n  getSpinnerCssClass() {\n    let cssClass = 'spinner';\n    if (!this.state.showSpinner) {\n      cssClass += ' hidden';\n    }\n\n    return cssClass;\n  }\n\n  getLogoCssClass() {\n    let cssClass = 'navbar-logo';\n    if (this.state.showSpinner) {\n      cssClass += ' hidden';\n    }\n\n    return cssClass;\n  }\n\n  handleSearchButtonClick() {\n    if (!ViewportMode.isMobileMode()) {\n      return;\n    }\n\n    if (this.$searchButton.hasClass('is-expanded')) {\n      this.$searchButton.removeClass('is-expanded');\n      EventHive.publish('search.hide');\n    }\n    else {\n      this.$searchButton.addClass('is-expanded');\n      EventHive.publish('search.show');\n    }\n  }\n\n  handleHamburgerButtonClick(e) {\n    if (!ViewportMode.isMobileMode()) {\n      return;\n    }\n\n    const $hamburger = $(e.target);\n    if ($hamburger.hasClass('is-expanded')) {\n      $hamburger.removeClass('is-expanded');\n      EventHive.publish('hamburger.hide');\n    }\n    else {\n      $hamburger.addClass('is-expanded');\n      EventHive.publish('hamburger.show');\n    }\n  }\n\n  handleSearchCleared(e) {\n    this.$searchInput.val('');\n    $(e.target).blur();\n    this.props.handleSearchCleared();\n  }\n\n  subscribeSpinner() {\n    // listen on global event so we can toggle the spinner from unrelated\n    // components\n    EventHive.subscribe('spinner.toggle', (data) => {\n      this.setState({ showSpinner: data.show });\n    });\n  }\n\n  subscribeSearch() {\n    EventHive.subscribe('search.focus', () => {\n      this.$searchInput.focus();\n      this.$searchInput.select();\n    });\n  }\n\n  subscribeMobileSearch() {\n    // handle hamburger and search toggling\n    if (ViewportMode.isMobileMode()) {\n      EventHive.subscribe('search.hide', () => {\n        this.$searchButton.removeClass('is-expanded');\n      });\n\n      this.$searchBox.collapse({ toggle: false });\n      // when the hiding animation is done\n      this.$searchBox.on('hidden.bs.collapse', () => {\n        EventHive.publish('search.hide_end');\n      });\n\n      EventHive.subscribe('search.show', () => {\n        this.$searchBox.collapse('show');\n      });\n      EventHive.subscribe('search.hide', () => {\n        this.$searchBox.collapse('hide');\n      });\n\n      EventHive.subscribe('note.open', () => {\n        if (this.$searchInput.val() === '') {\n          EventHive.publish('search.hide');\n        }\n      });\n\n      // event when search box is fully toggled (see bootstrap collapse)\n      this.$searchBox.on('shown.bs.collapse', () => {\n        this.$searchInput.focus();\n      });\n    }\n  }\n}\n\nexport default Navbar;\n","import React, { Component } from 'react';\n\nclass SaveStateLabel extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = { isSynced: props.isSynced };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ isSynced: nextProps.isSynced });\n  }\n\n  render () {\n    return (\n      <div className=\"save-state\">\n        {\n          this.state.isSynced\n            ?\n            <div className=\"label label-success\">Saved</div>\n            :\n            <div className=\"label label-warning\">Saving</div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default SaveStateLabel;\n","import React, { Component } from 'react';\nimport ViewportMode from './ViewportMode';\nimport EventHive from './EventHive';\n\nclass AddNoteButton extends Component {\n  render () {\n    return (\n      <button\n        className=\"btn btn-info btn-fab btn-new-note\"\n        onClick={this.handleNewNoteClick.bind(this)}\n      >\n        <i className=\"material-icons\">add</i>\n      </button>\n    );\n  }\n\n  handleNewNoteClick(e) {\n    e.preventDefault();\n\n    if (ViewportMode.isMobileMode()) {\n      EventHive.publish('hamburger.hide');\n    }\n\n    this.props.handleNewNoteClick();\n  }\n}\n\nexport default AddNoteButton;\n","class SyncStorage {\n  static get KEY_PREFIX() {\n    return 'note-';\n  }\n\n  static set(note) {\n    localStorage.setItem(\n      SyncStorage._getKey(note),\n      note.toJson()\n    );\n  }\n\n  static get(note) {\n    return localStorage.getItem(SyncStorage._getKey(note));\n  }\n\n  static eachNote(callback) {\n    const keys = SyncStorage._getLocalStorageKeys();\n\n    for (let key of keys) {\n      const noteRaw = localStorage.getItem(key);\n      const note = JSON.parse(noteRaw);\n\n      callback(note, noteRaw);\n    }\n  }\n\n  static remove(note) {\n    localStorage.removeItem(SyncStorage._getKey(note));\n  }\n\n  static isEmpty() {\n    return SyncStorage._getLocalStorageKeys().length === 0;\n  }\n\n  static _getLocalStorageKeys() {\n    let keys = [];\n    const length = localStorage.length;\n\n    for (let i = 0; i < length; ++i) {\n      const key = localStorage.key(i);\n\n      if (key.startsWith(SyncStorage.KEY_PREFIX)) {\n        keys.push(key);\n      }\n    }\n\n    return keys;\n  }\n\n  static _getKey(note) {\n    return SyncStorage.KEY_PREFIX + note.uid;\n  }\n}\n\nexport default SyncStorage;\n","import $ from 'jquery';\nimport SyncStorage from './SyncStorage';\nimport Note from './Note';\nimport AlertFlash from './AlertFlash';\n\nclass AutoSave {\n  constructor(onServerSync) {\n    this.onServerSyncCallback = onServerSync;\n\n    this.setSyncStatus();\n  }\n\n  static get POLLING_INTERVAL() {\n    return 3000;\n  }\n\n  startPolling() {\n    setInterval(this.syncToServer.bind(this), AutoSave.POLLING_INTERVAL);\n  }\n\n  setChange(note) {\n    this.setSyncStatus(false);\n\n    SyncStorage.set(note);\n  }\n\n  syncToServer() {\n    if ($.active) {\n      return;\n    }\n\n    SyncStorage.eachNote((note, noteRaw) => {\n      const url = '/api/notes/' + note.uid;\n\n      $.ajax({\n        url: url,\n        method: 'PUT',\n        dataType: 'json',\n        data: { note: note }\n      })\n      // `serverNote` is just a partial note, the response doesn't contain all\n      // attributes\n      .done((serverNote) => this.ajaxDone(note, noteRaw, Note.fromAttributes(serverNote)))\n      .fail((xhr, status, error) => this.ajaxFail(xhr, status, error, url));\n    });\n  }\n\n  setSyncStatus(isSynced, serverNote) {\n    if (isSynced === undefined) {\n      isSynced = SyncStorage.isEmpty();\n    }\n\n    if (isSynced) {\n      window.onbeforeunload = undefined;\n    }\n    else {\n      window.onbeforeunload = function() {\n        return \"Behold! You have unsynchronized changes. \" +\n          \"If you leave the page now, your changes won't be saved to the server.\\n\" +\n          \"(Your data won't be lost, but it will only remain locally in your browser)\";\n      };\n    }\n    this.onServerSyncCallback({ isSynced: isSynced, note: serverNote });\n  }\n\n  ajaxDone(note, noteRaw, serverNote) {\n    // if the content is still the same -> clear from sync storage\n    const syncStorageRawNote = SyncStorage.get(note);\n    if (noteRaw === syncStorageRawNote) {\n      SyncStorage.remove(note);\n    }\n    else {\n      // update the server updated at in the sync storage item as well.  the\n      // content may have been updated in the meantime from the same source. if\n      // we don't do this we will get a conflict, which is not what we want in\n      // this case.\n      const note = Note.fromAttributes(JSON.parse(syncStorageRawNote));\n      note.serverUpdatedAt = serverNote.serverUpdatedAt;\n\n      SyncStorage.set(note);\n    }\n\n    this.setSyncStatus(undefined, serverNote);\n  }\n\n  ajaxFail(xhr, status, error, url) {\n    // 0 == UNSENT -> most probably no internet connection\n    if (xhr.readyState === 0) {\n      return;\n    }\n\n    if (xhr.status === 401) {\n      AlertFlash.show(\n        // we could actually link to the current page with `href=\"\"`, but by\n        // doing this the title input field contains the wrong value once we\n        // are redirected back after login (the value is loaded from the\n        // server, and the save request call doesn't update the title field).\n        // the cheap solution for now is to redirect to the root page, so the\n        // user has to click on the note, which will properly update the\n        // fields.\n        // TODO: use the current page link and fix the update of the title\n        // field\n        'Your session has expired. You need to <a href=\"/\" class=\"alert-link\">sign in</a> again.<br>' +\n        \"Your changes won't be lost, once you're signed in they will be saved to the server.\"\n      );\n    }\n    else if (xhr.status === 422) {\n      AlertFlash.show(xhr.responseJSON.errors.join('<br>'));\n    }\n    else {\n      AlertFlash.show('Something went sideways: ' + error.toString());\n      console.error('url: ', url, 'xhr: ', xhr, 'status: ', status, 'err: ', error.toString());\n    }\n  }\n}\n\nexport default AutoSave;\n","import React, { Component } from 'react';\nimport $ from 'jquery';\nimport debounce from 'throttle-debounce/debounce';\nimport './keyboard';\nimport NoteList from './NoteList';\nimport NoteForm from './NoteForm';\nimport Note from './Note';\nimport PushState from  './PushState';\nimport Navbar from './Navbar';\nimport SaveStateLabel from './SaveStateLabel';\nimport AddNoteButton from './AddNoteButton';\nimport AlertFlash from './AlertFlash';\nimport EventHive from './EventHive';\nimport AutoSave from './AutoSave';\n\nclass NoteEdit extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.pushState = new PushState(this.props.history);\n\n    const { match } = this.props;\n\n    if (props.note) {\n      this.initStateFromNote(props.note);\n    }\n    else if (match.params.id) {\n      this.initStateFromNoteId(match.params.id);\n    }\n    else {\n      this.state = this.getNewNoteAttributes();\n    }\n\n    this.handleSearchEnterDebounced = debounce(500, this.handleSearchEnterDebounced);\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderHeaderBar()}\n        {this.renderContent()}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.autoSave = new AutoSave(this.handleServerSync.bind(this));\n    this.autoSave.startPolling();\n\n    EventHive.subscribe('note.create', (data) => {\n      this.setNewNote(() => {\n        EventHive.publish('hamburger.hide');\n        EventHive.publish('note.update', data);\n      });\n    });\n\n    EventHive.subscribe('note.new', (data) => {\n      this.setNewNote();\n    });\n  }\n\n  renderHeaderBar() {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          <div className=\"navbar navbar-fixed-top navbar-info navbar-notes\">\n            <Navbar\n              handleSearchEnter={this.handleSearchEnter.bind(this)}\n              handleSearchCleared={this.handleSearchCleared.bind(this)} />\n\n            <SaveStateLabel isSynced={this.state.isSynced} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderContent() {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <NoteList\n            activeNoteUid={this.state.note.uid}\n            isSynced={this.state.isSynced}\n            isInitialEdit={this.state.isInitialEdit}\n            searchQuery={this.state.searchQuery}\n            handleNoteClick={this.handleNoteClick.bind(this)}\n            handleDeleteNoteClick={this.handleDeleteNoteClick.bind(this)}\n            handleArchiveNoteClick={this.handleArchiveNoteClick.bind(this)} />\n        </div>\n        <div className=\"col-md-8\">\n          <NoteForm\n            note={this.state.note}\n            handleChange={this.handleEditChange.bind(this)} />\n        </div>\n        <AddNoteButton handleNewNoteClick={this.handleNewNoteClick.bind(this)} />\n      </div>\n    );\n  }\n\n  /* eslint-disable react/no-direct-mutation-state */\n  initStateFromNote(note) {\n    this.state = {\n      isInitialEdit: true,\n      note: Note.fromAttributes(note)\n    };\n    this.pushState.setBrowserTitle(note);\n  }\n\n  initStateFromNoteId(id) {\n    // set new note as state, otherwise the state will be undefined\n    this.state = {\n      ...this.getNewNoteAttributes(),\n      isInitialEdit: true\n    };\n\n    $.ajax({\n      url: `/api/notes/${id}`,\n      dataType: 'json',\n    })\n    .done((data) => {\n      const note = Note.fromAttributes(data.note);\n      this.setState({\n        isInitialEdit: true,\n        note: note\n      }, () => this.pushState.setBrowserTitle(note));\n    })\n    .fail((xhr, status, error) => {\n      AlertFlash.show(\n        'While trying to load the note the internet broke down (or something ' +\n          'else failed, maybe the note could not be found)'\n      );\n    })\n  }\n  /* eslint-enable react/no-direct-mutation-state */\n\n  handleNoteClick(note, e) {\n    e.preventDefault();\n\n    this.setState({ note: note });\n    this.pushState.setEdit(note);\n    this.pushState.setBrowserTitle(note);\n  }\n\n  handleDeleteNoteClick(note, e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    import('bootbox').then(bootbox => {\n      bootbox.confirm('Are you sure? <br> The note will be permanently deleted.', (result) => {\n        if (!result) { return; }\n\n        this.setState({ isSynced: false });\n\n        this.deleteNote(note);\n      });\n    });\n  }\n\n  handleArchiveNoteClick(note, e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    import('bootbox').then(bootbox => {\n      bootbox.confirm('Are you sure you want to archive this note?', (result) => {\n        if (!result) { return; }\n\n        note.setArchived();\n        this.handleEditChange(note)\n        this.setNewNote();\n      });\n    });\n  }\n\n  handleNewNoteClick() {\n    this.setNewNote();\n  }\n\n  handleEditChange(note) {\n    this.pushState.setEdit(note);\n\n    this.autoSave.setChange(note);\n  }\n\n  handleServerSync(data) {\n    let state = { isSynced: data.isSynced };\n    // when a note has been synced we need to set the serverUpdatedAt timestamp\n    // for the conflict detection to work\n    // (only do this if the current note is the synced note)\n    if (data.note && this.state.note.uid === data.note.uid) {\n      state.note = this.state.note;\n      state.note.serverUpdatedAt = data.note.serverUpdatedAt;\n    }\n    this.setState(state);\n\n    if (data.isSynced) {\n      this.pushState.setBrowserTitle(this.state.note);\n    }\n  }\n\n  handleSearchEnter(e) {\n    e.persist();\n    this.handleSearchEnterDebounced(e);\n  }\n\n  handleSearchEnterDebounced(e) {\n    this.setState({ searchQuery: e.target.value });\n    EventHive.publish('search.entered');\n  }\n\n  handleSearchCleared() {\n    this.setState({ searchQuery: '' });\n    EventHive.publish('search.entered');\n  }\n\n  getNewNoteAttributes() {\n    return { note: new Note() }\n  }\n\n  setNewNote(afterSetState) {\n    this.setState(this.getNewNoteAttributes(), afterSetState);\n    this.pushState.setNew();\n    this.pushState.setBrowserTitle();\n  }\n\n  deleteNote(note) {\n    $.ajax({\n      url: '/api/notes/' + note.uid,\n      method: 'DELETE',\n      dataType: 'json',\n    })\n    .done(() => {\n      localStorage.removeItem('note-' + note.uid);\n\n      if (this.state.note.uid === note.uid) {\n        this.setNewNote();\n      }\n    })\n    .fail(function(xhr, status, error) {\n      var message = 'Oh my, the note could not be deleted.';\n      // 0 == UNSENT -> most probably no internet connection\n      if (xhr.readyState === 0) {\n        message += \"<br>Please check your internet connection (Well yes, sorry, deleting in offline mode is not yet suppported).\"\n      }\n      AlertFlash.show(message);\n      console.error('note.uid: ', note.uid, 'status: ', status, 'error: ', error.toString());\n    })\n    .always(() => {\n      this.setState({ isSynced: true });\n    });\n  }\n}\n\nexport default NoteEdit;\n","import React, { Component, Suspense } from 'react';\nimport { HashRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\nimport $ from 'jquery';\nimport './global-jquery'; // bootstrap-material-design needs global jQuery\nimport 'arrive/src/arrive';\nimport 'bootstrap-material-design/dist/js/material';\nimport 'bootstrap-sass/assets/javascripts/bootstrap/modal';\nimport 'bootstrap-sass/assets/javascripts/bootstrap/transition';\nimport 'bootstrap-sass/assets/javascripts/bootstrap/collapse';\nimport Flash from './Flash';\nimport NoteEdit from './NoteEdit';\nimport './App.css';\nimport './fonts/roboto.css';\nimport './fonts/material-icons.css';\n\nconst LoginForm = React.lazy(() => import('./LoginForm'));\nconst RegistrationForm = React.lazy(() => import('./RegistrationForm'));\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isLoggedIn: null\n    };\n\n    this.setIsLoggedIn();\n  }\n\n  render() {\n    return (\n      <Router>\n        <div className=\"container-fluid\">\n          <Flash />\n          { this.renderLoggedIn() }\n          { this.renderLoggedOut() }\n        </div>\n      </Router>\n    );\n  }\n\n  componentDidMount() {\n    $.material.init();\n  }\n\n  onLoginSuccess() {\n    this.setState({ isLoggedIn: true });\n  }\n\n  setIsLoggedIn() {\n    $.ajax({\n      url: '/users/is_authenticated',\n      method: 'GET',\n      dataType: 'json',\n    })\n    .done((data, status, xhr) =>{\n      this.onLoginSuccess();\n    })\n    .fail(() => {\n      this.setState({ isLoggedIn: false });\n    });\n  }\n\n  renderLoggedIn() {\n    if (this.state.isLoggedIn === true) {\n      return (\n        <Switch>\n          <Route path='/notes/:id' component={ NoteEdit } />\n          <Route path='/notes' component={ NoteEdit } />\n          <Redirect from='/' to='/notes' />\n        </Switch>\n      );\n    }\n  }\n\n  renderLoggedOut() {\n    if (this.state.isLoggedIn === false) {\n      return (\n        <Switch>\n          <Route path='/register' render={props => (\n            <Suspense fallback={<div></div>}>\n              <RegistrationForm onLoginSuccess={this.onLoginSuccess.bind(this)} {...props} />\n            </Suspense>\n          )}/>\n\n          <Route path='/login' render={props => (\n            <Suspense fallback={<div></div>}>\n              <LoginForm onLoginSuccess={this.onLoginSuccess.bind(this)} alwaysRememberMe={window.ALWAYS_REMEMBER_ME} />\n            </Suspense>\n          )}/>\n\n          <Redirect to='/login' />\n        </Switch>\n      );\n    }\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import EventHive from './EventHive';\nimport NoticeFlash from './NoticeFlash';\nimport AlertFlash from './AlertFlash';\n\n// expose certain globals that are needed by the mobile app\nexport default function setGlobals() {\n  window.EventHive = EventHive;\n  window.NoticeFlash = NoticeFlash;\n  window.AlertFlash = AlertFlash;\n}\n","import $ from 'jquery';\n\n// ability to set a different host for the API calls. this is needed for the\n// mobile app.\nexport default function setApiHost() {\n  if (!window.API_HOST) { return; }\n\n  $.ajaxPrefilter(function(options) {\n    options.url = window.API_HOST + options.url;\n  });\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport setApiHost from './setApiHost';\nimport setGlobals from './setGlobals';\nimport registerGlobalSpinner from './registerGlobalSpinner';\n\nsetGlobals();\nsetApiHost();\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n\nregisterGlobalSpinner();\n","import $ from 'jquery';\nimport EventHive from './EventHive';\n\n// Shows a global spinner on every ajax request.\n// The spinner is only shown if the request runs for 500ms or more.\nexport default function registerGlobalSpinner() {\n  let timeoutId = undefined;\n\n  $(document).ajaxStart(() => {\n    clearTimeout(timeoutId);\n\n    timeoutId = setTimeout(() => {\n      EventHive.publish('spinner.toggle', { show: true })\n    }, 500)\n  });\n\n  $(document).ajaxStop(() => {\n    clearTimeout(timeoutId);\n\n    EventHive.publish('spinner.toggle', { show: false })\n  });\n}\n","import AbstractFlash from './AbstractFlash';\n\nclass NoticeFlash extends AbstractFlash {\n  getName() {\n    return 'notice';\n  }\n\n  getAdditionalCssClass() {\n    return 'alert-info';\n  }\n}\n\nexport default NoticeFlash;\n","import React, { Component } from 'react';\nimport $ from 'jquery';\n\nclass AbstractFlash extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = { message: props.message };\n  }\n\n  render () {\n    if (!this.state.message) {\n      return null;\n    }\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-4 col-md-offset-4\">\n          <div className={this.getCssClass()}>\n            <button className=\"close\" type=\"button\" onClick={this.handleClose.bind(this)}>×</button>\n            <div dangerouslySetInnerHTML={{ __html: this.state.message }} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  getCssClass() {\n    var cssClasses = ['alert', 'alert-dismissible', this.getAdditionalCssClass()];\n\n    return cssClasses.join(' ');\n  }\n\n  handleClose() {\n    this.setState({ message: null });\n  }\n\n  componentDidMount() {\n    // listen on global event so we can use `NoticeFlash.show('hello')`\n    $(document).on(this.constructor.getEventName(), (e, data) => {\n      this.setState({ message: data.message });\n    });\n  }\n\n  componentWillUnmount() {\n    $(document).off(this.constructor.getEventName());\n  }\n\n  getAdditionalCssClass() {\n  }\n\n  getName() {\n  }\n\n  static getEventName() {\n    return 'mykonote.flash.' + this.prototype.getName();\n  }\n\n  static show(message) {\n    $(document).trigger(this.getEventName(), { message: message });\n  }\n\n  static clear() {\n    $(document).trigger(this.getEventName(), { message: null });\n  }\n}\n\nexport default AbstractFlash;\n","module.exports = __webpack_public_path__ + \"static/media/logo.8ad1a424.svg\";"],"sourceRoot":""}